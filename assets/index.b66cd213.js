var La=Object.defineProperty,Ka=Object.defineProperties;var Ha=Object.getOwnPropertyDescriptors;var Cn=Object.getOwnPropertySymbols;var Ga=Object.prototype.hasOwnProperty,Ja=Object.prototype.propertyIsEnumerable;var Tn=(e,t,r)=>t in e?La(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,pe=(e,t)=>{for(var r in t||(t={}))Ga.call(t,r)&&Tn(e,r,t[r]);if(Cn)for(var r of Cn(t))Ja.call(t,r)&&Tn(e,r,t[r]);return e},Ke=(e,t)=>Ka(e,Ha(t));import{slice as Ba,openArray as Wa}from"https://cdn.skypack.dev/zarr";const Xa=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&a(c)}).observe(document,{childList:!0,subtree:!0});function r(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerpolicy&&(o.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?o.credentials="include":n.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function a(n){if(n.ep)return;n.ep=!0;const o=r(n);fetch(n.href,o)}};Xa();var Qa=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function Ya(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Sr={exports:{}},Yn={},Te={},gt={},Ht={},J={},Kt={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.regexpCode=e.getEsmExportName=e.getProperty=e.safeStringify=e.stringify=e.strConcat=e.addCodeArg=e.str=e._=e.nil=e._Code=e.Name=e.IDENTIFIER=e._CodeOrName=void 0;class t{}e._CodeOrName=t,e.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class r extends t{constructor(b){if(super(),!e.IDENTIFIER.test(b))throw new Error("CodeGen: name must be a valid identifier");this.str=b}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}e.Name=r;class a extends t{constructor(b){super(),this._items=typeof b=="string"?[b]:b}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const b=this._items[0];return b===""||b==='""'}get str(){var b;return(b=this._str)!==null&&b!==void 0?b:this._str=this._items.reduce((O,j)=>`${O}${j}`,"")}get names(){var b;return(b=this._names)!==null&&b!==void 0?b:this._names=this._items.reduce((O,j)=>(j instanceof r&&(O[j.str]=(O[j.str]||0)+1),O),{})}}e._Code=a,e.nil=new a("");function n(h,...b){const O=[h[0]];let j=0;for(;j<b.length;)p(O,b[j]),O.push(h[++j]);return new a(O)}e._=n;const o=new a("+");function c(h,...b){const O=[R(h[0])];let j=0;for(;j<b.length;)O.push(o),p(O,b[j]),O.push(o,R(h[++j]));return y(O),new a(O)}e.str=c;function p(h,b){b instanceof a?h.push(...b._items):b instanceof r?h.push(b):h.push(v(b))}e.addCodeArg=p;function y(h){let b=1;for(;b<h.length-1;){if(h[b]===o){const O=m(h[b-1],h[b+1]);if(O!==void 0){h.splice(b-1,3,O);continue}h[b++]="+"}b++}}function m(h,b){if(b==='""')return h;if(h==='""')return b;if(typeof h=="string")return b instanceof r||h[h.length-1]!=='"'?void 0:typeof b!="string"?`${h.slice(0,-1)}${b}"`:b[0]==='"'?h.slice(0,-1)+b.slice(1):void 0;if(typeof b=="string"&&b[0]==='"'&&!(h instanceof r))return`"${h}${b.slice(1)}`}function f(h,b){return b.emptyStr()?h:h.emptyStr()?b:c`${h}${b}`}e.strConcat=f;function v(h){return typeof h=="number"||typeof h=="boolean"||h===null?h:R(Array.isArray(h)?h.join(","):h)}function I(h){return new a(R(h))}e.stringify=I;function R(h){return JSON.stringify(h).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}e.safeStringify=R;function N(h){return typeof h=="string"&&e.IDENTIFIER.test(h)?new a(`.${h}`):n`[${h}]`}e.getProperty=N;function E(h){if(typeof h=="string"&&e.IDENTIFIER.test(h))return new a(`${h}`);throw new Error(`CodeGen: invalid export name: ${h}, use explicit $id name mapping`)}e.getEsmExportName=E;function $(h){return new a(h.toString())}e.regexpCode=$})(Kt);var Pr={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ValueScope=e.ValueScopeName=e.Scope=e.varKinds=e.UsedValueState=void 0;const t=Kt;class r extends Error{constructor(m){super(`CodeGen: "code" for ${m} not defined`),this.value=m.value}}var a;(function(y){y[y.Started=0]="Started",y[y.Completed=1]="Completed"})(a=e.UsedValueState||(e.UsedValueState={})),e.varKinds={const:new t.Name("const"),let:new t.Name("let"),var:new t.Name("var")};class n{constructor({prefixes:m,parent:f}={}){this._names={},this._prefixes=m,this._parent=f}toName(m){return m instanceof t.Name?m:this.name(m)}name(m){return new t.Name(this._newName(m))}_newName(m){const f=this._names[m]||this._nameGroup(m);return`${m}${f.index++}`}_nameGroup(m){var f,v;if(((v=(f=this._parent)===null||f===void 0?void 0:f._prefixes)===null||v===void 0?void 0:v.has(m))||this._prefixes&&!this._prefixes.has(m))throw new Error(`CodeGen: prefix "${m}" is not allowed in this scope`);return this._names[m]={prefix:m,index:0}}}e.Scope=n;class o extends t.Name{constructor(m,f){super(f),this.prefix=m}setValue(m,{property:f,itemIndex:v}){this.value=m,this.scopePath=(0,t._)`.${new t.Name(f)}[${v}]`}}e.ValueScopeName=o;const c=(0,t._)`\n`;class p extends n{constructor(m){super(m),this._values={},this._scope=m.scope,this.opts=Ke(pe({},m),{_n:m.lines?c:t.nil})}get(){return this._scope}name(m){return new o(m,this._newName(m))}value(m,f){var v;if(f.ref===void 0)throw new Error("CodeGen: ref must be passed in value");const I=this.toName(m),{prefix:R}=I,N=(v=f.key)!==null&&v!==void 0?v:f.ref;let E=this._values[R];if(E){const b=E.get(N);if(b)return b}else E=this._values[R]=new Map;E.set(N,I);const $=this._scope[R]||(this._scope[R]=[]),h=$.length;return $[h]=f.ref,I.setValue(f,{property:R,itemIndex:h}),I}getValue(m,f){const v=this._values[m];if(!!v)return v.get(f)}scopeRefs(m,f=this._values){return this._reduceValues(f,v=>{if(v.scopePath===void 0)throw new Error(`CodeGen: name "${v}" has no value`);return(0,t._)`${m}${v.scopePath}`})}scopeCode(m=this._values,f,v){return this._reduceValues(m,I=>{if(I.value===void 0)throw new Error(`CodeGen: name "${I}" has no value`);return I.value.code},f,v)}_reduceValues(m,f,v={},I){let R=t.nil;for(const N in m){const E=m[N];if(!E)continue;const $=v[N]=v[N]||new Map;E.forEach(h=>{if($.has(h))return;$.set(h,a.Started);let b=f(h);if(b){const O=this.opts.es5?e.varKinds.var:e.varKinds.const;R=(0,t._)`${R}${O} ${h} = ${b};${this.opts._n}`}else if(b=I==null?void 0:I(h))R=(0,t._)`${R}${b}${this.opts._n}`;else throw new r(h);$.set(h,a.Completed)})}return R}}e.ValueScope=p})(Pr);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.or=e.and=e.not=e.CodeGen=e.operators=e.varKinds=e.ValueScopeName=e.ValueScope=e.Scope=e.Name=e.regexpCode=e.stringify=e.getProperty=e.nil=e.strConcat=e.str=e._=void 0;const t=Kt,r=Pr;var a=Kt;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return a._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return a.str}}),Object.defineProperty(e,"strConcat",{enumerable:!0,get:function(){return a.strConcat}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return a.nil}}),Object.defineProperty(e,"getProperty",{enumerable:!0,get:function(){return a.getProperty}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return a.stringify}}),Object.defineProperty(e,"regexpCode",{enumerable:!0,get:function(){return a.regexpCode}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return a.Name}});var n=Pr;Object.defineProperty(e,"Scope",{enumerable:!0,get:function(){return n.Scope}}),Object.defineProperty(e,"ValueScope",{enumerable:!0,get:function(){return n.ValueScope}}),Object.defineProperty(e,"ValueScopeName",{enumerable:!0,get:function(){return n.ValueScopeName}}),Object.defineProperty(e,"varKinds",{enumerable:!0,get:function(){return n.varKinds}}),e.operators={GT:new t._Code(">"),GTE:new t._Code(">="),LT:new t._Code("<"),LTE:new t._Code("<="),EQ:new t._Code("==="),NEQ:new t._Code("!=="),NOT:new t._Code("!"),OR:new t._Code("||"),AND:new t._Code("&&"),ADD:new t._Code("+")};class o{optimizeNodes(){return this}optimizeNames(s,u){return this}}class c extends o{constructor(s,u,T){super(),this.varKind=s,this.name=u,this.rhs=T}render({es5:s,_n:u}){const T=s?r.varKinds.var:this.varKind,V=this.rhs===void 0?"":` = ${this.rhs}`;return`${T} ${this.name}${V};`+u}optimizeNames(s,u){if(!!s[this.name.str])return this.rhs&&(this.rhs=ue(this.rhs,s,u)),this}get names(){return this.rhs instanceof t._CodeOrName?this.rhs.names:{}}}class p extends o{constructor(s,u,T){super(),this.lhs=s,this.rhs=u,this.sideEffects=T}render({_n:s}){return`${this.lhs} = ${this.rhs};`+s}optimizeNames(s,u){if(!(this.lhs instanceof t.Name&&!s[this.lhs.str]&&!this.sideEffects))return this.rhs=ue(this.rhs,s,u),this}get names(){const s=this.lhs instanceof t.Name?{}:pe({},this.lhs.names);return Ee(s,this.rhs)}}class y extends p{constructor(s,u,T,V){super(s,T,V),this.op=u}render({_n:s}){return`${this.lhs} ${this.op}= ${this.rhs};`+s}}class m extends o{constructor(s){super(),this.label=s,this.names={}}render({_n:s}){return`${this.label}:`+s}}class f extends o{constructor(s){super(),this.label=s,this.names={}}render({_n:s}){return`break${this.label?` ${this.label}`:""};`+s}}class v extends o{constructor(s){super(),this.error=s}render({_n:s}){return`throw ${this.error};`+s}get names(){return this.error.names}}class I extends o{constructor(s){super(),this.code=s}render({_n:s}){return`${this.code};`+s}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(s,u){return this.code=ue(this.code,s,u),this}get names(){return this.code instanceof t._CodeOrName?this.code.names:{}}}class R extends o{constructor(s=[]){super(),this.nodes=s}render(s){return this.nodes.reduce((u,T)=>u+T.render(s),"")}optimizeNodes(){const{nodes:s}=this;let u=s.length;for(;u--;){const T=s[u].optimizeNodes();Array.isArray(T)?s.splice(u,1,...T):T?s[u]=T:s.splice(u,1)}return s.length>0?this:void 0}optimizeNames(s,u){const{nodes:T}=this;let V=T.length;for(;V--;){const F=T[V];F.optimizeNames(s,u)||(We(s,F.names),T.splice(V,1))}return T.length>0?this:void 0}get names(){return this.nodes.reduce((s,u)=>Y(s,u.names),{})}}class N extends R{render(s){return"{"+s._n+super.render(s)+"}"+s._n}}class E extends R{}class $ extends N{}$.kind="else";class h extends N{constructor(s,u){super(u),this.condition=s}render(s){let u=`if(${this.condition})`+super.render(s);return this.else&&(u+="else "+this.else.render(s)),u}optimizeNodes(){super.optimizeNodes();const s=this.condition;if(s===!0)return this.nodes;let u=this.else;if(u){const T=u.optimizeNodes();u=this.else=Array.isArray(T)?new $(T):T}if(u)return s===!1?u instanceof h?u:u.nodes:this.nodes.length?this:new h(Xe(s),u instanceof h?[u]:u.nodes);if(!(s===!1||!this.nodes.length))return this}optimizeNames(s,u){var T;if(this.else=(T=this.else)===null||T===void 0?void 0:T.optimizeNames(s,u),!!(super.optimizeNames(s,u)||this.else))return this.condition=ue(this.condition,s,u),this}get names(){const s=super.names;return Ee(s,this.condition),this.else&&Y(s,this.else.names),s}}h.kind="if";class b extends N{}b.kind="for";class O extends b{constructor(s){super(),this.iteration=s}render(s){return`for(${this.iteration})`+super.render(s)}optimizeNames(s,u){if(!!super.optimizeNames(s,u))return this.iteration=ue(this.iteration,s,u),this}get names(){return Y(super.names,this.iteration.names)}}class j extends b{constructor(s,u,T,V){super(),this.varKind=s,this.name=u,this.from=T,this.to=V}render(s){const u=s.es5?r.varKinds.var:this.varKind,{name:T,from:V,to:F}=this;return`for(${u} ${T}=${V}; ${T}<${F}; ${T}++)`+super.render(s)}get names(){const s=Ee(super.names,this.from);return Ee(s,this.to)}}class A extends b{constructor(s,u,T,V){super(),this.loop=s,this.varKind=u,this.name=T,this.iterable=V}render(s){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(s)}optimizeNames(s,u){if(!!super.optimizeNames(s,u))return this.iterable=ue(this.iterable,s,u),this}get names(){return Y(super.names,this.iterable.names)}}class _ extends N{constructor(s,u,T){super(),this.name=s,this.args=u,this.async=T}render(s){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(s)}}_.kind="func";class C extends R{render(s){return"return "+super.render(s)}}C.kind="return";class D extends N{render(s){let u="try"+super.render(s);return this.catch&&(u+=this.catch.render(s)),this.finally&&(u+=this.finally.render(s)),u}optimizeNodes(){var s,u;return super.optimizeNodes(),(s=this.catch)===null||s===void 0||s.optimizeNodes(),(u=this.finally)===null||u===void 0||u.optimizeNodes(),this}optimizeNames(s,u){var T,V;return super.optimizeNames(s,u),(T=this.catch)===null||T===void 0||T.optimizeNames(s,u),(V=this.finally)===null||V===void 0||V.optimizeNames(s,u),this}get names(){const s=super.names;return this.catch&&Y(s,this.catch.names),this.finally&&Y(s,this.finally.names),s}}class K extends N{constructor(s){super(),this.error=s}render(s){return`catch(${this.error})`+super.render(s)}}K.kind="catch";class B extends N{render(s){return"finally"+super.render(s)}}B.kind="finally";class se{constructor(s,u={}){this._values={},this._blockStarts=[],this._constants={},this.opts=Ke(pe({},u),{_n:u.lines?`
`:""}),this._extScope=s,this._scope=new r.Scope({parent:s}),this._nodes=[new E]}toString(){return this._root.render(this.opts)}name(s){return this._scope.name(s)}scopeName(s){return this._extScope.name(s)}scopeValue(s,u){const T=this._extScope.value(s,u);return(this._values[T.prefix]||(this._values[T.prefix]=new Set)).add(T),T}getScopeValue(s,u){return this._extScope.getValue(s,u)}scopeRefs(s){return this._extScope.scopeRefs(s,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(s,u,T,V){const F=this._scope.toName(u);return T!==void 0&&V&&(this._constants[F.str]=T),this._leafNode(new c(s,F,T)),F}const(s,u,T){return this._def(r.varKinds.const,s,u,T)}let(s,u,T){return this._def(r.varKinds.let,s,u,T)}var(s,u,T){return this._def(r.varKinds.var,s,u,T)}assign(s,u,T){return this._leafNode(new p(s,u,T))}add(s,u){return this._leafNode(new y(s,e.operators.ADD,u))}code(s){return typeof s=="function"?s():s!==t.nil&&this._leafNode(new I(s)),this}object(...s){const u=["{"];for(const[T,V]of s)u.length>1&&u.push(","),u.push(T),(T!==V||this.opts.es5)&&(u.push(":"),(0,t.addCodeArg)(u,V));return u.push("}"),new t._Code(u)}if(s,u,T){if(this._blockNode(new h(s)),u&&T)this.code(u).else().code(T).endIf();else if(u)this.code(u).endIf();else if(T)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(s){return this._elseNode(new h(s))}else(){return this._elseNode(new $)}endIf(){return this._endBlockNode(h,$)}_for(s,u){return this._blockNode(s),u&&this.code(u).endFor(),this}for(s,u){return this._for(new O(s),u)}forRange(s,u,T,V,F=this.opts.es5?r.varKinds.var:r.varKinds.let){const W=this._scope.toName(s);return this._for(new j(F,W,u,T),()=>V(W))}forOf(s,u,T,V=r.varKinds.const){const F=this._scope.toName(s);if(this.opts.es5){const W=u instanceof t.Name?u:this.var("_arr",u);return this.forRange("_i",0,(0,t._)`${W}.length`,Q=>{this.var(F,(0,t._)`${W}[${Q}]`),T(F)})}return this._for(new A("of",V,F,u),()=>T(F))}forIn(s,u,T,V=this.opts.es5?r.varKinds.var:r.varKinds.const){if(this.opts.ownProperties)return this.forOf(s,(0,t._)`Object.keys(${u})`,T);const F=this._scope.toName(s);return this._for(new A("in",V,F,u),()=>T(F))}endFor(){return this._endBlockNode(b)}label(s){return this._leafNode(new m(s))}break(s){return this._leafNode(new f(s))}return(s){const u=new C;if(this._blockNode(u),this.code(s),u.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(C)}try(s,u,T){if(!u&&!T)throw new Error('CodeGen: "try" without "catch" and "finally"');const V=new D;if(this._blockNode(V),this.code(s),u){const F=this.name("e");this._currNode=V.catch=new K(F),u(F)}return T&&(this._currNode=V.finally=new B,this.code(T)),this._endBlockNode(K,B)}throw(s){return this._leafNode(new v(s))}block(s,u){return this._blockStarts.push(this._nodes.length),s&&this.code(s).endBlock(u),this}endBlock(s){const u=this._blockStarts.pop();if(u===void 0)throw new Error("CodeGen: not in self-balancing block");const T=this._nodes.length-u;if(T<0||s!==void 0&&T!==s)throw new Error(`CodeGen: wrong number of nodes: ${T} vs ${s} expected`);return this._nodes.length=u,this}func(s,u=t.nil,T,V){return this._blockNode(new _(s,u,T)),V&&this.code(V).endFunc(),this}endFunc(){return this._endBlockNode(_)}optimize(s=1){for(;s-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(s){return this._currNode.nodes.push(s),this}_blockNode(s){this._currNode.nodes.push(s),this._nodes.push(s)}_endBlockNode(s,u){const T=this._currNode;if(T instanceof s||u&&T instanceof u)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${u?`${s.kind}/${u.kind}`:s.kind}"`)}_elseNode(s){const u=this._currNode;if(!(u instanceof h))throw new Error('CodeGen: "else" without "if"');return this._currNode=u.else=s,this}get _root(){return this._nodes[0]}get _currNode(){const s=this._nodes;return s[s.length-1]}set _currNode(s){const u=this._nodes;u[u.length-1]=s}}e.CodeGen=se;function Y(w,s){for(const u in s)w[u]=(w[u]||0)+(s[u]||0);return w}function Ee(w,s){return s instanceof t._CodeOrName?Y(w,s.names):w}function ue(w,s,u){if(w instanceof t.Name)return T(w);if(!V(w))return w;return new t._Code(w._items.reduce((F,W)=>(W instanceof t.Name&&(W=T(W)),W instanceof t._Code?F.push(...W._items):F.push(W),F),[]));function T(F){const W=u[F.str];return W===void 0||s[F.str]!==1?F:(delete s[F.str],W)}function V(F){return F instanceof t._Code&&F._items.some(W=>W instanceof t.Name&&s[W.str]===1&&u[W.str]!==void 0)}}function We(w,s){for(const u in s)w[u]=(w[u]||0)-(s[u]||0)}function Xe(w){return typeof w=="boolean"||typeof w=="number"||w===null?!w:(0,t._)`!${k(w)}`}e.not=Xe;const ot=g(e.operators.AND);function bt(...w){return w.reduce(ot)}e.and=bt;const it=g(e.operators.OR);function M(...w){return w.reduce(it)}e.or=M;function g(w){return(s,u)=>s===t.nil?u:u===t.nil?s:(0,t._)`${k(s)} ${w} ${k(u)}`}function k(w){return w instanceof t.Name?w:(0,t._)`(${w})`}})(J);var x={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.checkStrictMode=e.getErrorPath=e.Type=e.useFunc=e.setEvaluated=e.evaluatedPropsToName=e.mergeEvaluated=e.eachItem=e.unescapeJsonPointer=e.escapeJsonPointer=e.escapeFragment=e.unescapeFragment=e.schemaRefOrVal=e.schemaHasRulesButRef=e.schemaHasRules=e.checkUnknownRules=e.alwaysValidSchema=e.toHash=void 0;const t=J,r=Kt;function a(_){const C={};for(const D of _)C[D]=!0;return C}e.toHash=a;function n(_,C){return typeof C=="boolean"?C:Object.keys(C).length===0?!0:(o(_,C),!c(C,_.self.RULES.all))}e.alwaysValidSchema=n;function o(_,C=_.schema){const{opts:D,self:K}=_;if(!D.strictSchema||typeof C=="boolean")return;const B=K.RULES.keywords;for(const se in C)B[se]||A(_,`unknown keyword: "${se}"`)}e.checkUnknownRules=o;function c(_,C){if(typeof _=="boolean")return!_;for(const D in _)if(C[D])return!0;return!1}e.schemaHasRules=c;function p(_,C){if(typeof _=="boolean")return!_;for(const D in _)if(D!=="$ref"&&C.all[D])return!0;return!1}e.schemaHasRulesButRef=p;function y({topSchemaRef:_,schemaPath:C},D,K,B){if(!B){if(typeof D=="number"||typeof D=="boolean")return D;if(typeof D=="string")return(0,t._)`${D}`}return(0,t._)`${_}${C}${(0,t.getProperty)(K)}`}e.schemaRefOrVal=y;function m(_){return I(decodeURIComponent(_))}e.unescapeFragment=m;function f(_){return encodeURIComponent(v(_))}e.escapeFragment=f;function v(_){return typeof _=="number"?`${_}`:_.replace(/~/g,"~0").replace(/\//g,"~1")}e.escapeJsonPointer=v;function I(_){return _.replace(/~1/g,"/").replace(/~0/g,"~")}e.unescapeJsonPointer=I;function R(_,C){if(Array.isArray(_))for(const D of _)C(D);else C(_)}e.eachItem=R;function N({mergeNames:_,mergeToName:C,mergeValues:D,resultToName:K}){return(B,se,Y,Ee)=>{const ue=Y===void 0?se:Y instanceof t.Name?(se instanceof t.Name?_(B,se,Y):C(B,se,Y),Y):se instanceof t.Name?(C(B,Y,se),se):D(se,Y);return Ee===t.Name&&!(ue instanceof t.Name)?K(B,ue):ue}}e.mergeEvaluated={props:N({mergeNames:(_,C,D)=>_.if((0,t._)`${D} !== true && ${C} !== undefined`,()=>{_.if((0,t._)`${C} === true`,()=>_.assign(D,!0),()=>_.assign(D,(0,t._)`${D} || {}`).code((0,t._)`Object.assign(${D}, ${C})`))}),mergeToName:(_,C,D)=>_.if((0,t._)`${D} !== true`,()=>{C===!0?_.assign(D,!0):(_.assign(D,(0,t._)`${D} || {}`),$(_,D,C))}),mergeValues:(_,C)=>_===!0?!0:pe(pe({},_),C),resultToName:E}),items:N({mergeNames:(_,C,D)=>_.if((0,t._)`${D} !== true && ${C} !== undefined`,()=>_.assign(D,(0,t._)`${C} === true ? true : ${D} > ${C} ? ${D} : ${C}`)),mergeToName:(_,C,D)=>_.if((0,t._)`${D} !== true`,()=>_.assign(D,C===!0?!0:(0,t._)`${D} > ${C} ? ${D} : ${C}`)),mergeValues:(_,C)=>_===!0?!0:Math.max(_,C),resultToName:(_,C)=>_.var("items",C)})};function E(_,C){if(C===!0)return _.var("props",!0);const D=_.var("props",(0,t._)`{}`);return C!==void 0&&$(_,D,C),D}e.evaluatedPropsToName=E;function $(_,C,D){Object.keys(D).forEach(K=>_.assign((0,t._)`${C}${(0,t.getProperty)(K)}`,!0))}e.setEvaluated=$;const h={};function b(_,C){return _.scopeValue("func",{ref:C,code:h[C.code]||(h[C.code]=new r._Code(C.code))})}e.useFunc=b;var O;(function(_){_[_.Num=0]="Num",_[_.Str=1]="Str"})(O=e.Type||(e.Type={}));function j(_,C,D){if(_ instanceof t.Name){const K=C===O.Num;return D?K?(0,t._)`"[" + ${_} + "]"`:(0,t._)`"['" + ${_} + "']"`:K?(0,t._)`"/" + ${_}`:(0,t._)`"/" + ${_}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return D?(0,t.getProperty)(_).toString():"/"+v(_)}e.getErrorPath=j;function A(_,C,D=_.opts.strictSchema){if(!!D){if(C=`strict mode: ${C}`,D===!0)throw new Error(C);_.self.logger.warn(C)}}e.checkStrictMode=A})(x);var Fe={};Object.defineProperty(Fe,"__esModule",{value:!0});const ye=J,Za={data:new ye.Name("data"),valCxt:new ye.Name("valCxt"),instancePath:new ye.Name("instancePath"),parentData:new ye.Name("parentData"),parentDataProperty:new ye.Name("parentDataProperty"),rootData:new ye.Name("rootData"),dynamicAnchors:new ye.Name("dynamicAnchors"),vErrors:new ye.Name("vErrors"),errors:new ye.Name("errors"),this:new ye.Name("this"),self:new ye.Name("self"),scope:new ye.Name("scope"),json:new ye.Name("json"),jsonPos:new ye.Name("jsonPos"),jsonLen:new ye.Name("jsonLen"),jsonPart:new ye.Name("jsonPart")};Fe.default=Za;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.extendErrors=e.resetErrorsCount=e.reportExtraError=e.reportError=e.keyword$DataError=e.keywordError=void 0;const t=J,r=x,a=Fe;e.keywordError={message:({keyword:$})=>(0,t.str)`must pass "${$}" keyword validation`},e.keyword$DataError={message:({keyword:$,schemaType:h})=>h?(0,t.str)`"${$}" keyword must be ${h} ($data)`:(0,t.str)`"${$}" keyword is invalid ($data)`};function n($,h=e.keywordError,b,O){const{it:j}=$,{gen:A,compositeRule:_,allErrors:C}=j,D=v($,h,b);(O!=null?O:_||C)?y(A,D):m(j,(0,t._)`[${D}]`)}e.reportError=n;function o($,h=e.keywordError,b){const{it:O}=$,{gen:j,compositeRule:A,allErrors:_}=O,C=v($,h,b);y(j,C),A||_||m(O,a.default.vErrors)}e.reportExtraError=o;function c($,h){$.assign(a.default.errors,h),$.if((0,t._)`${a.default.vErrors} !== null`,()=>$.if(h,()=>$.assign((0,t._)`${a.default.vErrors}.length`,h),()=>$.assign(a.default.vErrors,null)))}e.resetErrorsCount=c;function p({gen:$,keyword:h,schemaValue:b,data:O,errsCount:j,it:A}){if(j===void 0)throw new Error("ajv implementation error");const _=$.name("err");$.forRange("i",j,a.default.errors,C=>{$.const(_,(0,t._)`${a.default.vErrors}[${C}]`),$.if((0,t._)`${_}.instancePath === undefined`,()=>$.assign((0,t._)`${_}.instancePath`,(0,t.strConcat)(a.default.instancePath,A.errorPath))),$.assign((0,t._)`${_}.schemaPath`,(0,t.str)`${A.errSchemaPath}/${h}`),A.opts.verbose&&($.assign((0,t._)`${_}.schema`,b),$.assign((0,t._)`${_}.data`,O))})}e.extendErrors=p;function y($,h){const b=$.const("err",h);$.if((0,t._)`${a.default.vErrors} === null`,()=>$.assign(a.default.vErrors,(0,t._)`[${b}]`),(0,t._)`${a.default.vErrors}.push(${b})`),$.code((0,t._)`${a.default.errors}++`)}function m($,h){const{gen:b,validateName:O,schemaEnv:j}=$;j.$async?b.throw((0,t._)`new ${$.ValidationError}(${h})`):(b.assign((0,t._)`${O}.errors`,h),b.return(!1))}const f={keyword:new t.Name("keyword"),schemaPath:new t.Name("schemaPath"),params:new t.Name("params"),propertyName:new t.Name("propertyName"),message:new t.Name("message"),schema:new t.Name("schema"),parentSchema:new t.Name("parentSchema")};function v($,h,b){const{createErrors:O}=$.it;return O===!1?(0,t._)`{}`:I($,h,b)}function I($,h,b={}){const{gen:O,it:j}=$,A=[R(j,b),N($,b)];return E($,h,A),O.object(...A)}function R({errorPath:$},{instancePath:h}){const b=h?(0,t.str)`${$}${(0,r.getErrorPath)(h,r.Type.Str)}`:$;return[a.default.instancePath,(0,t.strConcat)(a.default.instancePath,b)]}function N({keyword:$,it:{errSchemaPath:h}},{schemaPath:b,parentSchema:O}){let j=O?h:(0,t.str)`${h}/${$}`;return b&&(j=(0,t.str)`${j}${(0,r.getErrorPath)(b,r.Type.Str)}`),[f.schemaPath,j]}function E($,{params:h,message:b},O){const{keyword:j,data:A,schemaValue:_,it:C}=$,{opts:D,propertyName:K,topSchemaRef:B,schemaPath:se}=C;O.push([f.keyword,j],[f.params,typeof h=="function"?h($):h||(0,t._)`{}`]),D.messages&&O.push([f.message,typeof b=="function"?b($):b]),D.verbose&&O.push([f.schema,_],[f.parentSchema,(0,t._)`${B}${se}`],[a.default.data,A]),K&&O.push([f.propertyName,K])}})(Ht);Object.defineProperty(gt,"__esModule",{value:!0});gt.boolOrEmptySchema=gt.topBoolOrEmptySchema=void 0;const xa=Ht,es=J,ts=Fe,rs={message:"boolean schema is false"};function ns(e){const{gen:t,schema:r,validateName:a}=e;r===!1?Zn(e,!1):typeof r=="object"&&r.$async===!0?t.return(ts.default.data):(t.assign((0,es._)`${a}.errors`,null),t.return(!0))}gt.topBoolOrEmptySchema=ns;function as(e,t){const{gen:r,schema:a}=e;a===!1?(r.var(t,!1),Zn(e)):r.var(t,!0)}gt.boolOrEmptySchema=as;function Zn(e,t){const{gen:r,data:a}=e,n={gen:r,keyword:"false schema",data:a,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:e};(0,xa.reportError)(n,rs,void 0,t)}var Gt={},at={};Object.defineProperty(at,"__esModule",{value:!0});at.getRules=at.isJSONType=void 0;const ss=["string","number","integer","boolean","null","object","array"],os=new Set(ss);function is(e){return typeof e=="string"&&os.has(e)}at.isJSONType=is;function cs(){const e={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:Ke(pe({},e),{integer:!0,boolean:!0,null:!0}),rules:[{rules:[]},e.number,e.string,e.array,e.object],post:{rules:[]},all:{},keywords:{}}}at.getRules=cs;var Ue={};Object.defineProperty(Ue,"__esModule",{value:!0});Ue.shouldUseRule=Ue.shouldUseGroup=Ue.schemaHasRulesForType=void 0;function ls({schema:e,self:t},r){const a=t.RULES.types[r];return a&&a!==!0&&xn(e,a)}Ue.schemaHasRulesForType=ls;function xn(e,t){return t.rules.some(r=>ea(e,r))}Ue.shouldUseGroup=xn;function ea(e,t){var r;return e[t.keyword]!==void 0||((r=t.definition.implements)===null||r===void 0?void 0:r.some(a=>e[a]!==void 0))}Ue.shouldUseRule=ea;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.reportTypeError=e.checkDataTypes=e.checkDataType=e.coerceAndCheckDataType=e.getJSONTypes=e.getSchemaTypes=e.DataType=void 0;const t=at,r=Ue,a=Ht,n=J,o=x;var c;(function(O){O[O.Correct=0]="Correct",O[O.Wrong=1]="Wrong"})(c=e.DataType||(e.DataType={}));function p(O){const j=y(O.type);if(j.includes("null")){if(O.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!j.length&&O.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');O.nullable===!0&&j.push("null")}return j}e.getSchemaTypes=p;function y(O){const j=Array.isArray(O)?O:O?[O]:[];if(j.every(t.isJSONType))return j;throw new Error("type must be JSONType or JSONType[]: "+j.join(","))}e.getJSONTypes=y;function m(O,j){const{gen:A,data:_,opts:C}=O,D=v(j,C.coerceTypes),K=j.length>0&&!(D.length===0&&j.length===1&&(0,r.schemaHasRulesForType)(O,j[0]));if(K){const B=E(j,_,C.strictNumbers,c.Wrong);A.if(B,()=>{D.length?I(O,j,D):h(O)})}return K}e.coerceAndCheckDataType=m;const f=new Set(["string","number","integer","boolean","null"]);function v(O,j){return j?O.filter(A=>f.has(A)||j==="array"&&A==="array"):[]}function I(O,j,A){const{gen:_,data:C,opts:D}=O,K=_.let("dataType",(0,n._)`typeof ${C}`),B=_.let("coerced",(0,n._)`undefined`);D.coerceTypes==="array"&&_.if((0,n._)`${K} == 'object' && Array.isArray(${C}) && ${C}.length == 1`,()=>_.assign(C,(0,n._)`${C}[0]`).assign(K,(0,n._)`typeof ${C}`).if(E(j,C,D.strictNumbers),()=>_.assign(B,C))),_.if((0,n._)`${B} !== undefined`);for(const Y of A)(f.has(Y)||Y==="array"&&D.coerceTypes==="array")&&se(Y);_.else(),h(O),_.endIf(),_.if((0,n._)`${B} !== undefined`,()=>{_.assign(C,B),R(O,B)});function se(Y){switch(Y){case"string":_.elseIf((0,n._)`${K} == "number" || ${K} == "boolean"`).assign(B,(0,n._)`"" + ${C}`).elseIf((0,n._)`${C} === null`).assign(B,(0,n._)`""`);return;case"number":_.elseIf((0,n._)`${K} == "boolean" || ${C} === null
              || (${K} == "string" && ${C} && ${C} == +${C})`).assign(B,(0,n._)`+${C}`);return;case"integer":_.elseIf((0,n._)`${K} === "boolean" || ${C} === null
              || (${K} === "string" && ${C} && ${C} == +${C} && !(${C} % 1))`).assign(B,(0,n._)`+${C}`);return;case"boolean":_.elseIf((0,n._)`${C} === "false" || ${C} === 0 || ${C} === null`).assign(B,!1).elseIf((0,n._)`${C} === "true" || ${C} === 1`).assign(B,!0);return;case"null":_.elseIf((0,n._)`${C} === "" || ${C} === 0 || ${C} === false`),_.assign(B,null);return;case"array":_.elseIf((0,n._)`${K} === "string" || ${K} === "number"
              || ${K} === "boolean" || ${C} === null`).assign(B,(0,n._)`[${C}]`)}}}function R({gen:O,parentData:j,parentDataProperty:A},_){O.if((0,n._)`${j} !== undefined`,()=>O.assign((0,n._)`${j}[${A}]`,_))}function N(O,j,A,_=c.Correct){const C=_===c.Correct?n.operators.EQ:n.operators.NEQ;let D;switch(O){case"null":return(0,n._)`${j} ${C} null`;case"array":D=(0,n._)`Array.isArray(${j})`;break;case"object":D=(0,n._)`${j} && typeof ${j} == "object" && !Array.isArray(${j})`;break;case"integer":D=K((0,n._)`!(${j} % 1) && !isNaN(${j})`);break;case"number":D=K();break;default:return(0,n._)`typeof ${j} ${C} ${O}`}return _===c.Correct?D:(0,n.not)(D);function K(B=n.nil){return(0,n.and)((0,n._)`typeof ${j} == "number"`,B,A?(0,n._)`isFinite(${j})`:n.nil)}}e.checkDataType=N;function E(O,j,A,_){if(O.length===1)return N(O[0],j,A,_);let C;const D=(0,o.toHash)(O);if(D.array&&D.object){const K=(0,n._)`typeof ${j} != "object"`;C=D.null?K:(0,n._)`!${j} || ${K}`,delete D.null,delete D.array,delete D.object}else C=n.nil;D.number&&delete D.integer;for(const K in D)C=(0,n.and)(C,N(K,j,A,_));return C}e.checkDataTypes=E;const $={message:({schema:O})=>`must be ${O}`,params:({schema:O,schemaValue:j})=>typeof O=="string"?(0,n._)`{type: ${O}}`:(0,n._)`{type: ${j}}`};function h(O){const j=b(O);(0,a.reportError)(j,$)}e.reportTypeError=h;function b(O){const{gen:j,data:A,schema:_}=O,C=(0,o.schemaRefOrVal)(O,_,"type");return{gen:j,keyword:"type",data:A,schema:_.type,schemaCode:C,schemaValue:C,parentSchema:_,params:{},it:O}}})(Gt);var dr={};Object.defineProperty(dr,"__esModule",{value:!0});dr.assignDefaults=void 0;const pt=J,us=x;function ds(e,t){const{properties:r,items:a}=e.schema;if(t==="object"&&r)for(const n in r)Rn(e,n,r[n].default);else t==="array"&&Array.isArray(a)&&a.forEach((n,o)=>Rn(e,o,n.default))}dr.assignDefaults=ds;function Rn(e,t,r){const{gen:a,compositeRule:n,data:o,opts:c}=e;if(r===void 0)return;const p=(0,pt._)`${o}${(0,pt.getProperty)(t)}`;if(n){(0,us.checkStrictMode)(e,`default is ignored for: ${p}`);return}let y=(0,pt._)`${p} === undefined`;c.useDefaults==="empty"&&(y=(0,pt._)`${y} || ${p} === null || ${p} === ""`),a.if(y,(0,pt._)`${p} = ${(0,pt.stringify)(r)}`)}var Ve={},G={};Object.defineProperty(G,"__esModule",{value:!0});G.validateUnion=G.validateArray=G.usePattern=G.callValidateCode=G.schemaProperties=G.allSchemaProperties=G.noPropertyInData=G.propertyInData=G.isOwnProperty=G.hasPropFunc=G.reportMissingProp=G.checkMissingProp=G.checkReportMissingProp=void 0;const re=J,Ir=x,He=Fe,fs=x;function hs(e,t){const{gen:r,data:a,it:n}=e;r.if(kr(r,a,t,n.opts.ownProperties),()=>{e.setParams({missingProperty:(0,re._)`${t}`},!0),e.error()})}G.checkReportMissingProp=hs;function ms({gen:e,data:t,it:{opts:r}},a,n){return(0,re.or)(...a.map(o=>(0,re.and)(kr(e,t,o,r.ownProperties),(0,re._)`${n} = ${o}`)))}G.checkMissingProp=ms;function ps(e,t){e.setParams({missingProperty:t},!0),e.error()}G.reportMissingProp=ps;function ta(e){return e.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,re._)`Object.prototype.hasOwnProperty`})}G.hasPropFunc=ta;function jr(e,t,r){return(0,re._)`${ta(e)}.call(${t}, ${r})`}G.isOwnProperty=jr;function ys(e,t,r,a){const n=(0,re._)`${t}${(0,re.getProperty)(r)} !== undefined`;return a?(0,re._)`${n} && ${jr(e,t,r)}`:n}G.propertyInData=ys;function kr(e,t,r,a){const n=(0,re._)`${t}${(0,re.getProperty)(r)} === undefined`;return a?(0,re.or)(n,(0,re.not)(jr(e,t,r))):n}G.noPropertyInData=kr;function ra(e){return e?Object.keys(e).filter(t=>t!=="__proto__"):[]}G.allSchemaProperties=ra;function vs(e,t){return ra(t).filter(r=>!(0,Ir.alwaysValidSchema)(e,t[r]))}G.schemaProperties=vs;function $s({schemaCode:e,data:t,it:{gen:r,topSchemaRef:a,schemaPath:n,errorPath:o},it:c},p,y,m){const f=m?(0,re._)`${e}, ${t}, ${a}${n}`:t,v=[[He.default.instancePath,(0,re.strConcat)(He.default.instancePath,o)],[He.default.parentData,c.parentData],[He.default.parentDataProperty,c.parentDataProperty],[He.default.rootData,He.default.rootData]];c.opts.dynamicRef&&v.push([He.default.dynamicAnchors,He.default.dynamicAnchors]);const I=(0,re._)`${f}, ${r.object(...v)}`;return y!==re.nil?(0,re._)`${p}.call(${y}, ${I})`:(0,re._)`${p}(${I})`}G.callValidateCode=$s;const gs=(0,re._)`new RegExp`;function _s({gen:e,it:{opts:t}},r){const a=t.unicodeRegExp?"u":"",{regExp:n}=t.code,o=n(r,a);return e.scopeValue("pattern",{key:o.toString(),ref:o,code:(0,re._)`${n.code==="new RegExp"?gs:(0,fs.useFunc)(e,n)}(${r}, ${a})`})}G.usePattern=_s;function ws(e){const{gen:t,data:r,keyword:a,it:n}=e,o=t.name("valid");if(n.allErrors){const p=t.let("valid",!0);return c(()=>t.assign(p,!1)),p}return t.var(o,!0),c(()=>t.break()),o;function c(p){const y=t.const("len",(0,re._)`${r}.length`);t.forRange("i",0,y,m=>{e.subschema({keyword:a,dataProp:m,dataPropType:Ir.Type.Num},o),t.if((0,re.not)(o),p)})}}G.validateArray=ws;function Es(e){const{gen:t,schema:r,keyword:a,it:n}=e;if(!Array.isArray(r))throw new Error("ajv implementation error");if(r.some(y=>(0,Ir.alwaysValidSchema)(n,y))&&!n.opts.unevaluated)return;const c=t.let("valid",!1),p=t.name("_valid");t.block(()=>r.forEach((y,m)=>{const f=e.subschema({keyword:a,schemaProp:m,compositeRule:!0},p);t.assign(c,(0,re._)`${c} || ${p}`),e.mergeValidEvaluated(f,p)||t.if((0,re.not)(c))})),e.result(c,()=>e.reset(),()=>e.error(!0))}G.validateUnion=Es;Object.defineProperty(Ve,"__esModule",{value:!0});Ve.validateKeywordUsage=Ve.validSchemaType=Ve.funcKeywordCode=Ve.macroKeywordCode=void 0;const ve=J,tt=Fe,bs=G,Ss=Ht;function Ps(e,t){const{gen:r,keyword:a,schema:n,parentSchema:o,it:c}=e,p=t.macro.call(c.self,n,o,c),y=na(r,a,p);c.opts.validateSchema!==!1&&c.self.validateSchema(p,!0);const m=r.name("valid");e.subschema({schema:p,schemaPath:ve.nil,errSchemaPath:`${c.errSchemaPath}/${a}`,topSchemaRef:y,compositeRule:!0},m),e.pass(m,()=>e.error(!0))}Ve.macroKeywordCode=Ps;function Ns(e,t){var r;const{gen:a,keyword:n,schema:o,parentSchema:c,$data:p,it:y}=e;Cs(y,t);const m=!p&&t.compile?t.compile.call(y.self,o,c,y):t.validate,f=na(a,n,m),v=a.let("valid");e.block$data(v,I),e.ok((r=t.valid)!==null&&r!==void 0?r:v);function I(){if(t.errors===!1)E(),t.modifying&&In(e),$(()=>e.error());else{const h=t.async?R():N();t.modifying&&In(e),$(()=>Os(e,h))}}function R(){const h=a.let("ruleErrs",null);return a.try(()=>E((0,ve._)`await `),b=>a.assign(v,!1).if((0,ve._)`${b} instanceof ${y.ValidationError}`,()=>a.assign(h,(0,ve._)`${b}.errors`),()=>a.throw(b))),h}function N(){const h=(0,ve._)`${f}.errors`;return a.assign(h,null),E(ve.nil),h}function E(h=t.async?(0,ve._)`await `:ve.nil){const b=y.opts.passContext?tt.default.this:tt.default.self,O=!("compile"in t&&!p||t.schema===!1);a.assign(v,(0,ve._)`${h}${(0,bs.callValidateCode)(e,f,b,O)}`,t.modifying)}function $(h){var b;a.if((0,ve.not)((b=t.valid)!==null&&b!==void 0?b:v),h)}}Ve.funcKeywordCode=Ns;function In(e){const{gen:t,data:r,it:a}=e;t.if(a.parentData,()=>t.assign(r,(0,ve._)`${a.parentData}[${a.parentDataProperty}]`))}function Os(e,t){const{gen:r}=e;r.if((0,ve._)`Array.isArray(${t})`,()=>{r.assign(tt.default.vErrors,(0,ve._)`${tt.default.vErrors} === null ? ${t} : ${tt.default.vErrors}.concat(${t})`).assign(tt.default.errors,(0,ve._)`${tt.default.vErrors}.length`),(0,Ss.extendErrors)(e)},()=>e.error())}function Cs({schemaEnv:e},t){if(t.async&&!e.$async)throw new Error("async keyword in sync schema")}function na(e,t,r){if(r===void 0)throw new Error(`keyword "${t}" failed to compile`);return e.scopeValue("keyword",typeof r=="function"?{ref:r}:{ref:r,code:(0,ve.stringify)(r)})}function Ts(e,t,r=!1){return!t.length||t.some(a=>a==="array"?Array.isArray(e):a==="object"?e&&typeof e=="object"&&!Array.isArray(e):typeof e==a||r&&typeof e=="undefined")}Ve.validSchemaType=Ts;function Rs({schema:e,opts:t,self:r,errSchemaPath:a},n,o){if(Array.isArray(n.keyword)?!n.keyword.includes(o):n.keyword!==o)throw new Error("ajv implementation error");const c=n.dependencies;if(c!=null&&c.some(p=>!Object.prototype.hasOwnProperty.call(e,p)))throw new Error(`parent schema must have dependencies of ${o}: ${c.join(",")}`);if(n.validateSchema&&!n.validateSchema(e[o])){const y=`keyword "${o}" value is invalid at path "${a}": `+r.errorsText(n.validateSchema.errors);if(t.validateSchema==="log")r.logger.error(y);else throw new Error(y)}}Ve.validateKeywordUsage=Rs;var Be={};Object.defineProperty(Be,"__esModule",{value:!0});Be.extendSubschemaMode=Be.extendSubschemaData=Be.getSubschema=void 0;const Me=J,aa=x;function Is(e,{keyword:t,schemaProp:r,schema:a,schemaPath:n,errSchemaPath:o,topSchemaRef:c}){if(t!==void 0&&a!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(t!==void 0){const p=e.schema[t];return r===void 0?{schema:p,schemaPath:(0,Me._)`${e.schemaPath}${(0,Me.getProperty)(t)}`,errSchemaPath:`${e.errSchemaPath}/${t}`}:{schema:p[r],schemaPath:(0,Me._)`${e.schemaPath}${(0,Me.getProperty)(t)}${(0,Me.getProperty)(r)}`,errSchemaPath:`${e.errSchemaPath}/${t}/${(0,aa.escapeFragment)(r)}`}}if(a!==void 0){if(n===void 0||o===void 0||c===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:a,schemaPath:n,topSchemaRef:c,errSchemaPath:o}}throw new Error('either "keyword" or "schema" must be passed')}Be.getSubschema=Is;function js(e,t,{dataProp:r,dataPropType:a,data:n,dataTypes:o,propertyName:c}){if(n!==void 0&&r!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:p}=t;if(r!==void 0){const{errorPath:m,dataPathArr:f,opts:v}=t,I=p.let("data",(0,Me._)`${t.data}${(0,Me.getProperty)(r)}`,!0);y(I),e.errorPath=(0,Me.str)`${m}${(0,aa.getErrorPath)(r,a,v.jsPropertySyntax)}`,e.parentDataProperty=(0,Me._)`${r}`,e.dataPathArr=[...f,e.parentDataProperty]}if(n!==void 0){const m=n instanceof Me.Name?n:p.let("data",n,!0);y(m),c!==void 0&&(e.propertyName=c)}o&&(e.dataTypes=o);function y(m){e.data=m,e.dataLevel=t.dataLevel+1,e.dataTypes=[],t.definedProperties=new Set,e.parentData=t.data,e.dataNames=[...t.dataNames,m]}}Be.extendSubschemaData=js;function ks(e,{jtdDiscriminator:t,jtdMetadata:r,compositeRule:a,createErrors:n,allErrors:o}){a!==void 0&&(e.compositeRule=a),n!==void 0&&(e.createErrors=n),o!==void 0&&(e.allErrors=o),e.jtdDiscriminator=t,e.jtdMetadata=r}Be.extendSubschemaMode=ks;var me={},sa=function e(t,r){if(t===r)return!0;if(t&&r&&typeof t=="object"&&typeof r=="object"){if(t.constructor!==r.constructor)return!1;var a,n,o;if(Array.isArray(t)){if(a=t.length,a!=r.length)return!1;for(n=a;n--!==0;)if(!e(t[n],r[n]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if(o=Object.keys(t),a=o.length,a!==Object.keys(r).length)return!1;for(n=a;n--!==0;)if(!Object.prototype.hasOwnProperty.call(r,o[n]))return!1;for(n=a;n--!==0;){var c=o[n];if(!e(t[c],r[c]))return!1}return!0}return t!==t&&r!==r},oa={exports:{}},Je=oa.exports=function(e,t,r){typeof t=="function"&&(r=t,t={}),r=t.cb||r;var a=typeof r=="function"?r:r.pre||function(){},n=r.post||function(){};rr(t,a,n,e,"",e)};Je.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0};Je.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};Je.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};Je.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function rr(e,t,r,a,n,o,c,p,y,m){if(a&&typeof a=="object"&&!Array.isArray(a)){t(a,n,o,c,p,y,m);for(var f in a){var v=a[f];if(Array.isArray(v)){if(f in Je.arrayKeywords)for(var I=0;I<v.length;I++)rr(e,t,r,v[I],n+"/"+f+"/"+I,o,n,f,a,I)}else if(f in Je.propsKeywords){if(v&&typeof v=="object")for(var R in v)rr(e,t,r,v[R],n+"/"+f+"/"+Ds(R),o,n,f,a,R)}else(f in Je.keywords||e.allKeys&&!(f in Je.skipKeywords))&&rr(e,t,r,v,n+"/"+f,o,n,f,a)}r(a,n,o,c,p,y,m)}}function Ds(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}Object.defineProperty(me,"__esModule",{value:!0});me.getSchemaRefs=me.resolveUrl=me.normalizeId=me._getFullPath=me.getFullPath=me.inlineRef=void 0;const As=x,Ms=sa,Vs=oa.exports,Fs=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function zs(e,t=!0){return typeof e=="boolean"?!0:t===!0?!Nr(e):t?ia(e)<=t:!1}me.inlineRef=zs;const Us=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function Nr(e){for(const t in e){if(Us.has(t))return!0;const r=e[t];if(Array.isArray(r)&&r.some(Nr)||typeof r=="object"&&Nr(r))return!0}return!1}function ia(e){let t=0;for(const r in e){if(r==="$ref")return 1/0;if(t++,!Fs.has(r)&&(typeof e[r]=="object"&&(0,As.eachItem)(e[r],a=>t+=ia(a)),t===1/0))return 1/0}return t}function ca(e,t="",r){r!==!1&&(t=$t(t));const a=e.parse(t);return la(e,a)}me.getFullPath=ca;function la(e,t){return e.serialize(t).split("#")[0]+"#"}me._getFullPath=la;const qs=/#\/?$/;function $t(e){return e?e.replace(qs,""):""}me.normalizeId=$t;function Ls(e,t,r){return r=$t(r),e.resolve(t,r)}me.resolveUrl=Ls;const Ks=/^[a-z_][-a-z0-9._]*$/i;function Hs(e,t){if(typeof e=="boolean")return{};const{schemaId:r,uriResolver:a}=this.opts,n=$t(e[r]||t),o={"":n},c=ca(a,n,!1),p={},y=new Set;return Vs(e,{allKeys:!0},(v,I,R,N)=>{if(N===void 0)return;const E=c+I;let $=o[N];typeof v[r]=="string"&&($=h.call(this,v[r])),b.call(this,v.$anchor),b.call(this,v.$dynamicAnchor),o[I]=$;function h(O){const j=this.opts.uriResolver.resolve;if(O=$t($?j($,O):O),y.has(O))throw f(O);y.add(O);let A=this.refs[O];return typeof A=="string"&&(A=this.refs[A]),typeof A=="object"?m(v,A.schema,O):O!==$t(E)&&(O[0]==="#"?(m(v,p[O],O),p[O]=v):this.refs[O]=E),O}function b(O){if(typeof O=="string"){if(!Ks.test(O))throw new Error(`invalid anchor "${O}"`);h.call(this,`#${O}`)}}}),p;function m(v,I,R){if(I!==void 0&&!Ms(v,I))throw f(R)}function f(v){return new Error(`reference "${v}" resolves to more than one schema`)}}me.getSchemaRefs=Hs;Object.defineProperty(Te,"__esModule",{value:!0});Te.getData=Te.KeywordCxt=Te.validateFunctionCode=void 0;const ua=gt,jn=Gt,Dr=Ue,or=Gt,Gs=dr,Mt=Ve,$r=Be,z=J,L=Fe,Js=me,qe=x,kt=Ht;function Bs(e){if(ha(e)&&(ma(e),fa(e))){Qs(e);return}da(e,()=>(0,ua.topBoolOrEmptySchema)(e))}Te.validateFunctionCode=Bs;function da({gen:e,validateName:t,schema:r,schemaEnv:a,opts:n},o){n.code.es5?e.func(t,(0,z._)`${L.default.data}, ${L.default.valCxt}`,a.$async,()=>{e.code((0,z._)`"use strict"; ${kn(r,n)}`),Xs(e,n),e.code(o)}):e.func(t,(0,z._)`${L.default.data}, ${Ws(n)}`,a.$async,()=>e.code(kn(r,n)).code(o))}function Ws(e){return(0,z._)`{${L.default.instancePath}="", ${L.default.parentData}, ${L.default.parentDataProperty}, ${L.default.rootData}=${L.default.data}${e.dynamicRef?(0,z._)`, ${L.default.dynamicAnchors}={}`:z.nil}}={}`}function Xs(e,t){e.if(L.default.valCxt,()=>{e.var(L.default.instancePath,(0,z._)`${L.default.valCxt}.${L.default.instancePath}`),e.var(L.default.parentData,(0,z._)`${L.default.valCxt}.${L.default.parentData}`),e.var(L.default.parentDataProperty,(0,z._)`${L.default.valCxt}.${L.default.parentDataProperty}`),e.var(L.default.rootData,(0,z._)`${L.default.valCxt}.${L.default.rootData}`),t.dynamicRef&&e.var(L.default.dynamicAnchors,(0,z._)`${L.default.valCxt}.${L.default.dynamicAnchors}`)},()=>{e.var(L.default.instancePath,(0,z._)`""`),e.var(L.default.parentData,(0,z._)`undefined`),e.var(L.default.parentDataProperty,(0,z._)`undefined`),e.var(L.default.rootData,L.default.data),t.dynamicRef&&e.var(L.default.dynamicAnchors,(0,z._)`{}`)})}function Qs(e){const{schema:t,opts:r,gen:a}=e;da(e,()=>{r.$comment&&t.$comment&&ya(e),to(e),a.let(L.default.vErrors,null),a.let(L.default.errors,0),r.unevaluated&&Ys(e),pa(e),ao(e)})}function Ys(e){const{gen:t,validateName:r}=e;e.evaluated=t.const("evaluated",(0,z._)`${r}.evaluated`),t.if((0,z._)`${e.evaluated}.dynamicProps`,()=>t.assign((0,z._)`${e.evaluated}.props`,(0,z._)`undefined`)),t.if((0,z._)`${e.evaluated}.dynamicItems`,()=>t.assign((0,z._)`${e.evaluated}.items`,(0,z._)`undefined`))}function kn(e,t){const r=typeof e=="object"&&e[t.schemaId];return r&&(t.code.source||t.code.process)?(0,z._)`/*# sourceURL=${r} */`:z.nil}function Zs(e,t){if(ha(e)&&(ma(e),fa(e))){xs(e,t);return}(0,ua.boolOrEmptySchema)(e,t)}function fa({schema:e,self:t}){if(typeof e=="boolean")return!e;for(const r in e)if(t.RULES.all[r])return!0;return!1}function ha(e){return typeof e.schema!="boolean"}function xs(e,t){const{schema:r,gen:a,opts:n}=e;n.$comment&&r.$comment&&ya(e),ro(e),no(e);const o=a.const("_errs",L.default.errors);pa(e,o),a.var(t,(0,z._)`${o} === ${L.default.errors}`)}function ma(e){(0,qe.checkUnknownRules)(e),eo(e)}function pa(e,t){if(e.opts.jtd)return Dn(e,[],!1,t);const r=(0,jn.getSchemaTypes)(e.schema),a=(0,jn.coerceAndCheckDataType)(e,r);Dn(e,r,!a,t)}function eo(e){const{schema:t,errSchemaPath:r,opts:a,self:n}=e;t.$ref&&a.ignoreKeywordsWithRef&&(0,qe.schemaHasRulesButRef)(t,n.RULES)&&n.logger.warn(`$ref: keywords ignored in schema at path "${r}"`)}function to(e){const{schema:t,opts:r}=e;t.default!==void 0&&r.useDefaults&&r.strictSchema&&(0,qe.checkStrictMode)(e,"default is ignored in the schema root")}function ro(e){const t=e.schema[e.opts.schemaId];t&&(e.baseId=(0,Js.resolveUrl)(e.opts.uriResolver,e.baseId,t))}function no(e){if(e.schema.$async&&!e.schemaEnv.$async)throw new Error("async schema in sync schema")}function ya({gen:e,schemaEnv:t,schema:r,errSchemaPath:a,opts:n}){const o=r.$comment;if(n.$comment===!0)e.code((0,z._)`${L.default.self}.logger.log(${o})`);else if(typeof n.$comment=="function"){const c=(0,z.str)`${a}/$comment`,p=e.scopeValue("root",{ref:t.root});e.code((0,z._)`${L.default.self}.opts.$comment(${o}, ${c}, ${p}.schema)`)}}function ao(e){const{gen:t,schemaEnv:r,validateName:a,ValidationError:n,opts:o}=e;r.$async?t.if((0,z._)`${L.default.errors} === 0`,()=>t.return(L.default.data),()=>t.throw((0,z._)`new ${n}(${L.default.vErrors})`)):(t.assign((0,z._)`${a}.errors`,L.default.vErrors),o.unevaluated&&so(e),t.return((0,z._)`${L.default.errors} === 0`))}function so({gen:e,evaluated:t,props:r,items:a}){r instanceof z.Name&&e.assign((0,z._)`${t}.props`,r),a instanceof z.Name&&e.assign((0,z._)`${t}.items`,a)}function Dn(e,t,r,a){const{gen:n,schema:o,data:c,allErrors:p,opts:y,self:m}=e,{RULES:f}=m;if(o.$ref&&(y.ignoreKeywordsWithRef||!(0,qe.schemaHasRulesButRef)(o,f))){n.block(()=>$a(e,"$ref",f.all.$ref.definition));return}y.jtd||oo(e,t),n.block(()=>{for(const I of f.rules)v(I);v(f.post)});function v(I){!(0,Dr.shouldUseGroup)(o,I)||(I.type?(n.if((0,or.checkDataType)(I.type,c,y.strictNumbers)),An(e,I),t.length===1&&t[0]===I.type&&r&&(n.else(),(0,or.reportTypeError)(e)),n.endIf()):An(e,I),p||n.if((0,z._)`${L.default.errors} === ${a||0}`))}}function An(e,t){const{gen:r,schema:a,opts:{useDefaults:n}}=e;n&&(0,Gs.assignDefaults)(e,t.type),r.block(()=>{for(const o of t.rules)(0,Dr.shouldUseRule)(a,o)&&$a(e,o.keyword,o.definition,t.type)})}function oo(e,t){e.schemaEnv.meta||!e.opts.strictTypes||(io(e,t),e.opts.allowUnionTypes||co(e,t),lo(e,e.dataTypes))}function io(e,t){if(!!t.length){if(!e.dataTypes.length){e.dataTypes=t;return}t.forEach(r=>{Mn(e.dataTypes,r)||Ar(e,`type "${r}" not allowed by context "${e.dataTypes.join(",")}"`)}),e.dataTypes=e.dataTypes.filter(r=>Mn(t,r))}}function co(e,t){t.length>1&&!(t.length===2&&t.includes("null"))&&Ar(e,"use allowUnionTypes to allow union type keyword")}function lo(e,t){const r=e.self.RULES.all;for(const a in r){const n=r[a];if(typeof n=="object"&&(0,Dr.shouldUseRule)(e.schema,n)){const{type:o}=n.definition;o.length&&!o.some(c=>uo(t,c))&&Ar(e,`missing type "${o.join(",")}" for keyword "${a}"`)}}}function uo(e,t){return e.includes(t)||t==="number"&&e.includes("integer")}function Mn(e,t){return e.includes(t)||t==="integer"&&e.includes("number")}function Ar(e,t){t+=` at "${e.schemaEnv.baseId+e.errSchemaPath}" (strictTypes)`,(0,qe.checkStrictMode)(e,t,e.opts.strictTypes)}class va{constructor(t,r,a){if((0,Mt.validateKeywordUsage)(t,r,a),this.gen=t.gen,this.allErrors=t.allErrors,this.keyword=a,this.data=t.data,this.schema=t.schema[a],this.$data=r.$data&&t.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,qe.schemaRefOrVal)(t,this.schema,a,this.$data),this.schemaType=r.schemaType,this.parentSchema=t.schema,this.params={},this.it=t,this.def=r,this.$data)this.schemaCode=t.gen.const("vSchema",ga(this.$data,t));else if(this.schemaCode=this.schemaValue,!(0,Mt.validSchemaType)(this.schema,r.schemaType,r.allowUndefined))throw new Error(`${a} value must be ${JSON.stringify(r.schemaType)}`);("code"in r?r.trackErrors:r.errors!==!1)&&(this.errsCount=t.gen.const("_errs",L.default.errors))}result(t,r,a){this.failResult((0,z.not)(t),r,a)}failResult(t,r,a){this.gen.if(t),a?a():this.error(),r?(this.gen.else(),r(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(t,r){this.failResult((0,z.not)(t),void 0,r)}fail(t){if(t===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(t),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(t){if(!this.$data)return this.fail(t);const{schemaCode:r}=this;this.fail((0,z._)`${r} !== undefined && (${(0,z.or)(this.invalid$data(),t)})`)}error(t,r,a){if(r){this.setParams(r),this._error(t,a),this.setParams({});return}this._error(t,a)}_error(t,r){(t?kt.reportExtraError:kt.reportError)(this,this.def.error,r)}$dataError(){(0,kt.reportError)(this,this.def.$dataError||kt.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,kt.resetErrorsCount)(this.gen,this.errsCount)}ok(t){this.allErrors||this.gen.if(t)}setParams(t,r){r?Object.assign(this.params,t):this.params=t}block$data(t,r,a=z.nil){this.gen.block(()=>{this.check$data(t,a),r()})}check$data(t=z.nil,r=z.nil){if(!this.$data)return;const{gen:a,schemaCode:n,schemaType:o,def:c}=this;a.if((0,z.or)((0,z._)`${n} === undefined`,r)),t!==z.nil&&a.assign(t,!0),(o.length||c.validateSchema)&&(a.elseIf(this.invalid$data()),this.$dataError(),t!==z.nil&&a.assign(t,!1)),a.else()}invalid$data(){const{gen:t,schemaCode:r,schemaType:a,def:n,it:o}=this;return(0,z.or)(c(),p());function c(){if(a.length){if(!(r instanceof z.Name))throw new Error("ajv implementation error");const y=Array.isArray(a)?a:[a];return(0,z._)`${(0,or.checkDataTypes)(y,r,o.opts.strictNumbers,or.DataType.Wrong)}`}return z.nil}function p(){if(n.validateSchema){const y=t.scopeValue("validate$data",{ref:n.validateSchema});return(0,z._)`!${y}(${r})`}return z.nil}}subschema(t,r){const a=(0,$r.getSubschema)(this.it,t);(0,$r.extendSubschemaData)(a,this.it,t),(0,$r.extendSubschemaMode)(a,t);const n=Ke(pe(pe({},this.it),a),{items:void 0,props:void 0});return Zs(n,r),n}mergeEvaluated(t,r){const{it:a,gen:n}=this;!a.opts.unevaluated||(a.props!==!0&&t.props!==void 0&&(a.props=qe.mergeEvaluated.props(n,t.props,a.props,r)),a.items!==!0&&t.items!==void 0&&(a.items=qe.mergeEvaluated.items(n,t.items,a.items,r)))}mergeValidEvaluated(t,r){const{it:a,gen:n}=this;if(a.opts.unevaluated&&(a.props!==!0||a.items!==!0))return n.if(r,()=>this.mergeEvaluated(t,z.Name)),!0}}Te.KeywordCxt=va;function $a(e,t,r,a){const n=new va(e,r,t);"code"in r?r.code(n,a):n.$data&&r.validate?(0,Mt.funcKeywordCode)(n,r):"macro"in r?(0,Mt.macroKeywordCode)(n,r):(r.compile||r.validate)&&(0,Mt.funcKeywordCode)(n,r)}const fo=/^\/(?:[^~]|~0|~1)*$/,ho=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function ga(e,{dataLevel:t,dataNames:r,dataPathArr:a}){let n,o;if(e==="")return L.default.rootData;if(e[0]==="/"){if(!fo.test(e))throw new Error(`Invalid JSON-pointer: ${e}`);n=e,o=L.default.rootData}else{const m=ho.exec(e);if(!m)throw new Error(`Invalid JSON-pointer: ${e}`);const f=+m[1];if(n=m[2],n==="#"){if(f>=t)throw new Error(y("property/index",f));return a[t-f]}if(f>t)throw new Error(y("data",f));if(o=r[t-f],!n)return o}let c=o;const p=n.split("/");for(const m of p)m&&(o=(0,z._)`${o}${(0,z.getProperty)((0,qe.unescapeJsonPointer)(m))}`,c=(0,z._)`${c} && ${o}`);return c;function y(m,f){return`Cannot access ${m} ${f} levels up, current level is ${t}`}}Te.getData=ga;var fr={};Object.defineProperty(fr,"__esModule",{value:!0});class mo extends Error{constructor(t){super("validation failed"),this.errors=t,this.ajv=this.validation=!0}}fr.default=mo;var hr={};Object.defineProperty(hr,"__esModule",{value:!0});const gr=me;class po extends Error{constructor(t,r,a,n){super(n||`can't resolve reference ${a} from id ${r}`),this.missingRef=(0,gr.resolveUrl)(t,r,a),this.missingSchema=(0,gr.normalizeId)((0,gr.getFullPath)(t,this.missingRef))}}hr.default=po;var _e={};Object.defineProperty(_e,"__esModule",{value:!0});_e.resolveSchema=_e.getCompilingSchema=_e.resolveRef=_e.compileSchema=_e.SchemaEnv=void 0;const Ne=J,yo=fr,et=Fe,Ce=me,Vn=x,vo=Te;class mr{constructor(t){var r;this.refs={},this.dynamicAnchors={};let a;typeof t.schema=="object"&&(a=t.schema),this.schema=t.schema,this.schemaId=t.schemaId,this.root=t.root||this,this.baseId=(r=t.baseId)!==null&&r!==void 0?r:(0,Ce.normalizeId)(a==null?void 0:a[t.schemaId||"$id"]),this.schemaPath=t.schemaPath,this.localRefs=t.localRefs,this.meta=t.meta,this.$async=a==null?void 0:a.$async,this.refs={}}}_e.SchemaEnv=mr;function Mr(e){const t=_a.call(this,e);if(t)return t;const r=(0,Ce.getFullPath)(this.opts.uriResolver,e.root.baseId),{es5:a,lines:n}=this.opts.code,{ownProperties:o}=this.opts,c=new Ne.CodeGen(this.scope,{es5:a,lines:n,ownProperties:o});let p;e.$async&&(p=c.scopeValue("Error",{ref:yo.default,code:(0,Ne._)`require("ajv/dist/runtime/validation_error").default`}));const y=c.scopeName("validate");e.validateName=y;const m={gen:c,allErrors:this.opts.allErrors,data:et.default.data,parentData:et.default.parentData,parentDataProperty:et.default.parentDataProperty,dataNames:[et.default.data],dataPathArr:[Ne.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:c.scopeValue("schema",this.opts.code.source===!0?{ref:e.schema,code:(0,Ne.stringify)(e.schema)}:{ref:e.schema}),validateName:y,ValidationError:p,schema:e.schema,schemaEnv:e,rootId:r,baseId:e.baseId||r,schemaPath:Ne.nil,errSchemaPath:e.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,Ne._)`""`,opts:this.opts,self:this};let f;try{this._compilations.add(e),(0,vo.validateFunctionCode)(m),c.optimize(this.opts.code.optimize);const v=c.toString();f=`${c.scopeRefs(et.default.scope)}return ${v}`,this.opts.code.process&&(f=this.opts.code.process(f,e));const R=new Function(`${et.default.self}`,`${et.default.scope}`,f)(this,this.scope.get());if(this.scope.value(y,{ref:R}),R.errors=null,R.schema=e.schema,R.schemaEnv=e,e.$async&&(R.$async=!0),this.opts.code.source===!0&&(R.source={validateName:y,validateCode:v,scopeValues:c._values}),this.opts.unevaluated){const{props:N,items:E}=m;R.evaluated={props:N instanceof Ne.Name?void 0:N,items:E instanceof Ne.Name?void 0:E,dynamicProps:N instanceof Ne.Name,dynamicItems:E instanceof Ne.Name},R.source&&(R.source.evaluated=(0,Ne.stringify)(R.evaluated))}return e.validate=R,e}catch(v){throw delete e.validate,delete e.validateName,f&&this.logger.error("Error compiling schema, function code:",f),v}finally{this._compilations.delete(e)}}_e.compileSchema=Mr;function $o(e,t,r){var a;r=(0,Ce.resolveUrl)(this.opts.uriResolver,t,r);const n=e.refs[r];if(n)return n;let o=wo.call(this,e,r);if(o===void 0){const c=(a=e.localRefs)===null||a===void 0?void 0:a[r],{schemaId:p}=this.opts;c&&(o=new mr({schema:c,schemaId:p,root:e,baseId:t}))}if(o!==void 0)return e.refs[r]=go.call(this,o)}_e.resolveRef=$o;function go(e){return(0,Ce.inlineRef)(e.schema,this.opts.inlineRefs)?e.schema:e.validate?e:Mr.call(this,e)}function _a(e){for(const t of this._compilations)if(_o(t,e))return t}_e.getCompilingSchema=_a;function _o(e,t){return e.schema===t.schema&&e.root===t.root&&e.baseId===t.baseId}function wo(e,t){let r;for(;typeof(r=this.refs[t])=="string";)t=r;return r||this.schemas[t]||pr.call(this,e,t)}function pr(e,t){const r=this.opts.uriResolver.parse(t),a=(0,Ce._getFullPath)(this.opts.uriResolver,r);let n=(0,Ce.getFullPath)(this.opts.uriResolver,e.baseId,void 0);if(Object.keys(e.schema).length>0&&a===n)return _r.call(this,r,e);const o=(0,Ce.normalizeId)(a),c=this.refs[o]||this.schemas[o];if(typeof c=="string"){const p=pr.call(this,e,c);return typeof(p==null?void 0:p.schema)!="object"?void 0:_r.call(this,r,p)}if(typeof(c==null?void 0:c.schema)=="object"){if(c.validate||Mr.call(this,c),o===(0,Ce.normalizeId)(t)){const{schema:p}=c,{schemaId:y}=this.opts,m=p[y];return m&&(n=(0,Ce.resolveUrl)(this.opts.uriResolver,n,m)),new mr({schema:p,schemaId:y,root:e,baseId:n})}return _r.call(this,r,c)}}_e.resolveSchema=pr;const Eo=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function _r(e,{baseId:t,schema:r,root:a}){var n;if(((n=e.fragment)===null||n===void 0?void 0:n[0])!=="/")return;for(const p of e.fragment.slice(1).split("/")){if(typeof r=="boolean")return;const y=r[(0,Vn.unescapeFragment)(p)];if(y===void 0)return;r=y;const m=typeof r=="object"&&r[this.opts.schemaId];!Eo.has(p)&&m&&(t=(0,Ce.resolveUrl)(this.opts.uriResolver,t,m))}let o;if(typeof r!="boolean"&&r.$ref&&!(0,Vn.schemaHasRulesButRef)(r,this.RULES)){const p=(0,Ce.resolveUrl)(this.opts.uriResolver,t,r.$ref);o=pr.call(this,a,p)}const{schemaId:c}=this.opts;if(o=o||new mr({schema:r,schemaId:c,root:a,baseId:t}),o.schema!==o.root.schema)return o}const bo="https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",So="Meta-schema for $data reference (JSON AnySchema extension proposal)",Po="object",No=["$data"],Oo={$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},Co=!1;var To={$id:bo,description:So,type:Po,required:No,properties:Oo,additionalProperties:Co},Vr={},Or={exports:{}};/** @license URI.js v4.4.1 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js */(function(e,t){(function(r,a){a(t)})(Qa,function(r){function a(){for(var l=arguments.length,i=Array(l),d=0;d<l;d++)i[d]=arguments[d];if(i.length>1){i[0]=i[0].slice(0,-1);for(var P=i.length-1,S=1;S<P;++S)i[S]=i[S].slice(1,-1);return i[P]=i[P].slice(1),i.join("")}else return i[0]}function n(l){return"(?:"+l+")"}function o(l){return l===void 0?"undefined":l===null?"null":Object.prototype.toString.call(l).split(" ").pop().split("]").shift().toLowerCase()}function c(l){return l.toUpperCase()}function p(l){return l!=null?l instanceof Array?l:typeof l.length!="number"||l.split||l.setInterval||l.call?[l]:Array.prototype.slice.call(l):[]}function y(l,i){var d=l;if(i)for(var P in i)d[P]=i[P];return d}function m(l){var i="[A-Za-z]",d="[0-9]",P=a(d,"[A-Fa-f]"),S=n(n("%[EFef]"+P+"%"+P+P+"%"+P+P)+"|"+n("%[89A-Fa-f]"+P+"%"+P+P)+"|"+n("%"+P+P)),U="[\\:\\/\\?\\#\\[\\]\\@]",q="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",Z=a(U,q),te=l?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]",ie=l?"[\\uE000-\\uF8FF]":"[]",X=a(i,d,"[\\-\\.\\_\\~]",te);n(i+a(i,d,"[\\+\\-\\.]")+"*"),n(n(S+"|"+a(X,q,"[\\:]"))+"*");var ee=n(n("25[0-5]")+"|"+n("2[0-4]"+d)+"|"+n("1"+d+d)+"|"+n("0?[1-9]"+d)+"|0?0?"+d),ce=n(ee+"\\."+ee+"\\."+ee+"\\."+ee),H=n(P+"{1,4}"),ne=n(n(H+"\\:"+H)+"|"+ce),de=n(n(H+"\\:")+"{6}"+ne),ae=n("\\:\\:"+n(H+"\\:")+"{5}"+ne),Le=n(n(H)+"?\\:\\:"+n(H+"\\:")+"{4}"+ne),ke=n(n(n(H+"\\:")+"{0,1}"+H)+"?\\:\\:"+n(H+"\\:")+"{3}"+ne),De=n(n(n(H+"\\:")+"{0,2}"+H)+"?\\:\\:"+n(H+"\\:")+"{2}"+ne),mt=n(n(n(H+"\\:")+"{0,3}"+H)+"?\\:\\:"+H+"\\:"+ne),Ze=n(n(n(H+"\\:")+"{0,4}"+H)+"?\\:\\:"+ne),Se=n(n(n(H+"\\:")+"{0,5}"+H)+"?\\:\\:"+H),Ae=n(n(n(H+"\\:")+"{0,6}"+H)+"?\\:\\:"),xe=n([de,ae,Le,ke,De,mt,Ze,Se,Ae].join("|")),ze=n(n(X+"|"+S)+"+");n("[vV]"+P+"+\\."+a(X,q,"[\\:]")+"+"),n(n(S+"|"+a(X,q))+"*");var It=n(S+"|"+a(X,q,"[\\:\\@]"));return n(n(S+"|"+a(X,q,"[\\@]"))+"+"),n(n(It+"|"+a("[\\/\\?]",ie))+"*"),{NOT_SCHEME:new RegExp(a("[^]",i,d,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(a("[^\\%\\:]",X,q),"g"),NOT_HOST:new RegExp(a("[^\\%\\[\\]\\:]",X,q),"g"),NOT_PATH:new RegExp(a("[^\\%\\/\\:\\@]",X,q),"g"),NOT_PATH_NOSCHEME:new RegExp(a("[^\\%\\/\\@]",X,q),"g"),NOT_QUERY:new RegExp(a("[^\\%]",X,q,"[\\:\\@\\/\\?]",ie),"g"),NOT_FRAGMENT:new RegExp(a("[^\\%]",X,q,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(a("[^]",X,q),"g"),UNRESERVED:new RegExp(X,"g"),OTHER_CHARS:new RegExp(a("[^\\%]",X,Z),"g"),PCT_ENCODED:new RegExp(S,"g"),IPV4ADDRESS:new RegExp("^("+ce+")$"),IPV6ADDRESS:new RegExp("^\\[?("+xe+")"+n(n("\\%25|\\%(?!"+P+"{2})")+"("+ze+")")+"?\\]?$")}}var f=m(!1),v=m(!0),I=function(){function l(i,d){var P=[],S=!0,U=!1,q=void 0;try{for(var Z=i[Symbol.iterator](),te;!(S=(te=Z.next()).done)&&(P.push(te.value),!(d&&P.length===d));S=!0);}catch(ie){U=!0,q=ie}finally{try{!S&&Z.return&&Z.return()}finally{if(U)throw q}}return P}return function(i,d){if(Array.isArray(i))return i;if(Symbol.iterator in Object(i))return l(i,d);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),R=function(l){if(Array.isArray(l)){for(var i=0,d=Array(l.length);i<l.length;i++)d[i]=l[i];return d}else return Array.from(l)},N=2147483647,E=36,$=1,h=26,b=38,O=700,j=72,A=128,_="-",C=/^xn--/,D=/[^\0-\x7E]/,K=/[\x2E\u3002\uFF0E\uFF61]/g,B={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},se=E-$,Y=Math.floor,Ee=String.fromCharCode;function ue(l){throw new RangeError(B[l])}function We(l,i){for(var d=[],P=l.length;P--;)d[P]=i(l[P]);return d}function Xe(l,i){var d=l.split("@"),P="";d.length>1&&(P=d[0]+"@",l=d[1]),l=l.replace(K,".");var S=l.split("."),U=We(S,i).join(".");return P+U}function ot(l){for(var i=[],d=0,P=l.length;d<P;){var S=l.charCodeAt(d++);if(S>=55296&&S<=56319&&d<P){var U=l.charCodeAt(d++);(U&64512)==56320?i.push(((S&1023)<<10)+(U&1023)+65536):(i.push(S),d--)}else i.push(S)}return i}var bt=function(i){return String.fromCodePoint.apply(String,R(i))},it=function(i){return i-48<10?i-22:i-65<26?i-65:i-97<26?i-97:E},M=function(i,d){return i+22+75*(i<26)-((d!=0)<<5)},g=function(i,d,P){var S=0;for(i=P?Y(i/O):i>>1,i+=Y(i/d);i>se*h>>1;S+=E)i=Y(i/se);return Y(S+(se+1)*i/(i+b))},k=function(i){var d=[],P=i.length,S=0,U=A,q=j,Z=i.lastIndexOf(_);Z<0&&(Z=0);for(var te=0;te<Z;++te)i.charCodeAt(te)>=128&&ue("not-basic"),d.push(i.charCodeAt(te));for(var ie=Z>0?Z+1:0;ie<P;){for(var X=S,ee=1,ce=E;;ce+=E){ie>=P&&ue("invalid-input");var H=it(i.charCodeAt(ie++));(H>=E||H>Y((N-S)/ee))&&ue("overflow"),S+=H*ee;var ne=ce<=q?$:ce>=q+h?h:ce-q;if(H<ne)break;var de=E-ne;ee>Y(N/de)&&ue("overflow"),ee*=de}var ae=d.length+1;q=g(S-X,ae,X==0),Y(S/ae)>N-U&&ue("overflow"),U+=Y(S/ae),S%=ae,d.splice(S++,0,U)}return String.fromCodePoint.apply(String,d)},w=function(i){var d=[];i=ot(i);var P=i.length,S=A,U=0,q=j,Z=!0,te=!1,ie=void 0;try{for(var X=i[Symbol.iterator](),ee;!(Z=(ee=X.next()).done);Z=!0){var ce=ee.value;ce<128&&d.push(Ee(ce))}}catch(jt){te=!0,ie=jt}finally{try{!Z&&X.return&&X.return()}finally{if(te)throw ie}}var H=d.length,ne=H;for(H&&d.push(_);ne<P;){var de=N,ae=!0,Le=!1,ke=void 0;try{for(var De=i[Symbol.iterator](),mt;!(ae=(mt=De.next()).done);ae=!0){var Ze=mt.value;Ze>=S&&Ze<de&&(de=Ze)}}catch(jt){Le=!0,ke=jt}finally{try{!ae&&De.return&&De.return()}finally{if(Le)throw ke}}var Se=ne+1;de-S>Y((N-U)/Se)&&ue("overflow"),U+=(de-S)*Se,S=de;var Ae=!0,xe=!1,ze=void 0;try{for(var It=i[Symbol.iterator](),Sn;!(Ae=(Sn=It.next()).done);Ae=!0){var Pn=Sn.value;if(Pn<S&&++U>N&&ue("overflow"),Pn==S){for(var Wt=U,Xt=E;;Xt+=E){var Qt=Xt<=q?$:Xt>=q+h?h:Xt-q;if(Wt<Qt)break;var Nn=Wt-Qt,On=E-Qt;d.push(Ee(M(Qt+Nn%On,0))),Wt=Y(Nn/On)}d.push(Ee(M(Wt,0))),q=g(U,Se,ne==H),U=0,++ne}}}catch(jt){xe=!0,ze=jt}finally{try{!Ae&&It.return&&It.return()}finally{if(xe)throw ze}}++U,++S}return d.join("")},s=function(i){return Xe(i,function(d){return C.test(d)?k(d.slice(4).toLowerCase()):d})},u=function(i){return Xe(i,function(d){return D.test(d)?"xn--"+w(d):d})},T={version:"2.1.0",ucs2:{decode:ot,encode:bt},decode:k,encode:w,toASCII:u,toUnicode:s},V={};function F(l){var i=l.charCodeAt(0),d=void 0;return i<16?d="%0"+i.toString(16).toUpperCase():i<128?d="%"+i.toString(16).toUpperCase():i<2048?d="%"+(i>>6|192).toString(16).toUpperCase()+"%"+(i&63|128).toString(16).toUpperCase():d="%"+(i>>12|224).toString(16).toUpperCase()+"%"+(i>>6&63|128).toString(16).toUpperCase()+"%"+(i&63|128).toString(16).toUpperCase(),d}function W(l){for(var i="",d=0,P=l.length;d<P;){var S=parseInt(l.substr(d+1,2),16);if(S<128)i+=String.fromCharCode(S),d+=3;else if(S>=194&&S<224){if(P-d>=6){var U=parseInt(l.substr(d+4,2),16);i+=String.fromCharCode((S&31)<<6|U&63)}else i+=l.substr(d,6);d+=6}else if(S>=224){if(P-d>=9){var q=parseInt(l.substr(d+4,2),16),Z=parseInt(l.substr(d+7,2),16);i+=String.fromCharCode((S&15)<<12|(q&63)<<6|Z&63)}else i+=l.substr(d,9);d+=9}else i+=l.substr(d,3),d+=3}return i}function Q(l,i){function d(P){var S=W(P);return S.match(i.UNRESERVED)?S:P}return l.scheme&&(l.scheme=String(l.scheme).replace(i.PCT_ENCODED,d).toLowerCase().replace(i.NOT_SCHEME,"")),l.userinfo!==void 0&&(l.userinfo=String(l.userinfo).replace(i.PCT_ENCODED,d).replace(i.NOT_USERINFO,F).replace(i.PCT_ENCODED,c)),l.host!==void 0&&(l.host=String(l.host).replace(i.PCT_ENCODED,d).toLowerCase().replace(i.NOT_HOST,F).replace(i.PCT_ENCODED,c)),l.path!==void 0&&(l.path=String(l.path).replace(i.PCT_ENCODED,d).replace(l.scheme?i.NOT_PATH:i.NOT_PATH_NOSCHEME,F).replace(i.PCT_ENCODED,c)),l.query!==void 0&&(l.query=String(l.query).replace(i.PCT_ENCODED,d).replace(i.NOT_QUERY,F).replace(i.PCT_ENCODED,c)),l.fragment!==void 0&&(l.fragment=String(l.fragment).replace(i.PCT_ENCODED,d).replace(i.NOT_FRAGMENT,F).replace(i.PCT_ENCODED,c)),l}function oe(l){return l.replace(/^0*(.*)/,"$1")||"0"}function Re(l,i){var d=l.match(i.IPV4ADDRESS)||[],P=I(d,2),S=P[1];return S?S.split(".").map(oe).join("."):l}function ct(l,i){var d=l.match(i.IPV6ADDRESS)||[],P=I(d,3),S=P[1],U=P[2];if(S){for(var q=S.toLowerCase().split("::").reverse(),Z=I(q,2),te=Z[0],ie=Z[1],X=ie?ie.split(":").map(oe):[],ee=te.split(":").map(oe),ce=i.IPV4ADDRESS.test(ee[ee.length-1]),H=ce?7:8,ne=ee.length-H,de=Array(H),ae=0;ae<H;++ae)de[ae]=X[ae]||ee[ne+ae]||"";ce&&(de[H-1]=Re(de[H-1],i));var Le=de.reduce(function(Se,Ae,xe){if(!Ae||Ae==="0"){var ze=Se[Se.length-1];ze&&ze.index+ze.length===xe?ze.length++:Se.push({index:xe,length:1})}return Se},[]),ke=Le.sort(function(Se,Ae){return Ae.length-Se.length})[0],De=void 0;if(ke&&ke.length>1){var mt=de.slice(0,ke.index),Ze=de.slice(ke.index+ke.length);De=mt.join(":")+"::"+Ze.join(":")}else De=de.join(":");return U&&(De+="%"+U),De}else return l}var St=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,Pt="".match(/(){0}/)[1]===void 0;function we(l){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},d={},P=i.iri!==!1?v:f;i.reference==="suffix"&&(l=(i.scheme?i.scheme+":":"")+"//"+l);var S=l.match(St);if(S){Pt?(d.scheme=S[1],d.userinfo=S[3],d.host=S[4],d.port=parseInt(S[5],10),d.path=S[6]||"",d.query=S[7],d.fragment=S[8],isNaN(d.port)&&(d.port=S[5])):(d.scheme=S[1]||void 0,d.userinfo=l.indexOf("@")!==-1?S[3]:void 0,d.host=l.indexOf("//")!==-1?S[4]:void 0,d.port=parseInt(S[5],10),d.path=S[6]||"",d.query=l.indexOf("?")!==-1?S[7]:void 0,d.fragment=l.indexOf("#")!==-1?S[8]:void 0,isNaN(d.port)&&(d.port=l.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?S[4]:void 0)),d.host&&(d.host=ct(Re(d.host,P),P)),d.scheme===void 0&&d.userinfo===void 0&&d.host===void 0&&d.port===void 0&&!d.path&&d.query===void 0?d.reference="same-document":d.scheme===void 0?d.reference="relative":d.fragment===void 0?d.reference="absolute":d.reference="uri",i.reference&&i.reference!=="suffix"&&i.reference!==d.reference&&(d.error=d.error||"URI is not a "+i.reference+" reference.");var U=V[(i.scheme||d.scheme||"").toLowerCase()];if(!i.unicodeSupport&&(!U||!U.unicodeSupport)){if(d.host&&(i.domainHost||U&&U.domainHost))try{d.host=T.toASCII(d.host.replace(P.PCT_ENCODED,W).toLowerCase())}catch(q){d.error=d.error||"Host's domain name can not be converted to ASCII via punycode: "+q}Q(d,f)}else Q(d,P);U&&U.parse&&U.parse(d,i)}else d.error=d.error||"URI can not be parsed.";return d}function Nt(l,i){var d=i.iri!==!1?v:f,P=[];return l.userinfo!==void 0&&(P.push(l.userinfo),P.push("@")),l.host!==void 0&&P.push(ct(Re(String(l.host),d),d).replace(d.IPV6ADDRESS,function(S,U,q){return"["+U+(q?"%25"+q:"")+"]"})),(typeof l.port=="number"||typeof l.port=="string")&&(P.push(":"),P.push(String(l.port))),P.length?P.join(""):void 0}var lt=/^\.\.?\//,ut=/^\/\.(\/|$)/,dt=/^\/\.\.(\/|$)/,Ot=/^\/?(?:.|\n)*?(?=\/|$)/;function Ie(l){for(var i=[];l.length;)if(l.match(lt))l=l.replace(lt,"");else if(l.match(ut))l=l.replace(ut,"/");else if(l.match(dt))l=l.replace(dt,"/"),i.pop();else if(l==="."||l==="..")l="";else{var d=l.match(Ot);if(d){var P=d[0];l=l.slice(P.length),i.push(P)}else throw new Error("Unexpected dot segment condition")}return i.join("")}function $e(l){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},d=i.iri?v:f,P=[],S=V[(i.scheme||l.scheme||"").toLowerCase()];if(S&&S.serialize&&S.serialize(l,i),l.host&&!d.IPV6ADDRESS.test(l.host)){if(i.domainHost||S&&S.domainHost)try{l.host=i.iri?T.toUnicode(l.host):T.toASCII(l.host.replace(d.PCT_ENCODED,W).toLowerCase())}catch(Z){l.error=l.error||"Host's domain name can not be converted to "+(i.iri?"Unicode":"ASCII")+" via punycode: "+Z}}Q(l,d),i.reference!=="suffix"&&l.scheme&&(P.push(l.scheme),P.push(":"));var U=Nt(l,i);if(U!==void 0&&(i.reference!=="suffix"&&P.push("//"),P.push(U),l.path&&l.path.charAt(0)!=="/"&&P.push("/")),l.path!==void 0){var q=l.path;!i.absolutePath&&(!S||!S.absolutePath)&&(q=Ie(q)),U===void 0&&(q=q.replace(/^\/\//,"/%2F")),P.push(q)}return l.query!==void 0&&(P.push("?"),P.push(l.query)),l.fragment!==void 0&&(P.push("#"),P.push(l.fragment)),P.join("")}function ft(l,i){var d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},P=arguments[3],S={};return P||(l=we($e(l,d),d),i=we($e(i,d),d)),d=d||{},!d.tolerant&&i.scheme?(S.scheme=i.scheme,S.userinfo=i.userinfo,S.host=i.host,S.port=i.port,S.path=Ie(i.path||""),S.query=i.query):(i.userinfo!==void 0||i.host!==void 0||i.port!==void 0?(S.userinfo=i.userinfo,S.host=i.host,S.port=i.port,S.path=Ie(i.path||""),S.query=i.query):(i.path?(i.path.charAt(0)==="/"?S.path=Ie(i.path):((l.userinfo!==void 0||l.host!==void 0||l.port!==void 0)&&!l.path?S.path="/"+i.path:l.path?S.path=l.path.slice(0,l.path.lastIndexOf("/")+1)+i.path:S.path=i.path,S.path=Ie(S.path)),S.query=i.query):(S.path=l.path,i.query!==void 0?S.query=i.query:S.query=l.query),S.userinfo=l.userinfo,S.host=l.host,S.port=l.port),S.scheme=l.scheme),S.fragment=i.fragment,S}function Ct(l,i,d){var P=y({scheme:"null"},d);return $e(ft(we(l,P),we(i,P),P,!0),P)}function Qe(l,i){return typeof l=="string"?l=$e(we(l,i),i):o(l)==="object"&&(l=we($e(l,i),i)),l}function Tt(l,i,d){return typeof l=="string"?l=$e(we(l,d),d):o(l)==="object"&&(l=$e(l,d)),typeof i=="string"?i=$e(we(i,d),d):o(i)==="object"&&(i=$e(i,d)),l===i}function Bt(l,i){return l&&l.toString().replace(!i||!i.iri?f.ESCAPE:v.ESCAPE,F)}function be(l,i){return l&&l.toString().replace(!i||!i.iri?f.PCT_ENCODED:v.PCT_ENCODED,W)}var Ye={scheme:"http",domainHost:!0,parse:function(i,d){return i.host||(i.error=i.error||"HTTP URIs must have a host."),i},serialize:function(i,d){var P=String(i.scheme).toLowerCase()==="https";return(i.port===(P?443:80)||i.port==="")&&(i.port=void 0),i.path||(i.path="/"),i}},yn={scheme:"https",domainHost:Ye.domainHost,parse:Ye.parse,serialize:Ye.serialize};function vn(l){return typeof l.secure=="boolean"?l.secure:String(l.scheme).toLowerCase()==="wss"}var Rt={scheme:"ws",domainHost:!0,parse:function(i,d){var P=i;return P.secure=vn(P),P.resourceName=(P.path||"/")+(P.query?"?"+P.query:""),P.path=void 0,P.query=void 0,P},serialize:function(i,d){if((i.port===(vn(i)?443:80)||i.port==="")&&(i.port=void 0),typeof i.secure=="boolean"&&(i.scheme=i.secure?"wss":"ws",i.secure=void 0),i.resourceName){var P=i.resourceName.split("?"),S=I(P,2),U=S[0],q=S[1];i.path=U&&U!=="/"?U:void 0,i.query=q,i.resourceName=void 0}return i.fragment=void 0,i}},$n={scheme:"wss",domainHost:Rt.domainHost,parse:Rt.parse,serialize:Rt.serialize},Ia={},gn="[A-Za-z0-9\\-\\.\\_\\~\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]",je="[0-9A-Fa-f]",ja=n(n("%[EFef]"+je+"%"+je+je+"%"+je+je)+"|"+n("%[89A-Fa-f]"+je+"%"+je+je)+"|"+n("%"+je+je)),ka="[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]",Da="[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",Aa=a(Da,'[\\"\\\\]'),Ma="[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]",Va=new RegExp(gn,"g"),ht=new RegExp(ja,"g"),Fa=new RegExp(a("[^]",ka,"[\\.]",'[\\"]',Aa),"g"),_n=new RegExp(a("[^]",gn,Ma),"g"),za=_n;function vr(l){var i=W(l);return i.match(Va)?i:l}var wn={scheme:"mailto",parse:function(i,d){var P=i,S=P.to=P.path?P.path.split(","):[];if(P.path=void 0,P.query){for(var U=!1,q={},Z=P.query.split("&"),te=0,ie=Z.length;te<ie;++te){var X=Z[te].split("=");switch(X[0]){case"to":for(var ee=X[1].split(","),ce=0,H=ee.length;ce<H;++ce)S.push(ee[ce]);break;case"subject":P.subject=be(X[1],d);break;case"body":P.body=be(X[1],d);break;default:U=!0,q[be(X[0],d)]=be(X[1],d);break}}U&&(P.headers=q)}P.query=void 0;for(var ne=0,de=S.length;ne<de;++ne){var ae=S[ne].split("@");if(ae[0]=be(ae[0]),d.unicodeSupport)ae[1]=be(ae[1],d).toLowerCase();else try{ae[1]=T.toASCII(be(ae[1],d).toLowerCase())}catch(Le){P.error=P.error||"Email address's domain name can not be converted to ASCII via punycode: "+Le}S[ne]=ae.join("@")}return P},serialize:function(i,d){var P=i,S=p(i.to);if(S){for(var U=0,q=S.length;U<q;++U){var Z=String(S[U]),te=Z.lastIndexOf("@"),ie=Z.slice(0,te).replace(ht,vr).replace(ht,c).replace(Fa,F),X=Z.slice(te+1);try{X=d.iri?T.toUnicode(X):T.toASCII(be(X,d).toLowerCase())}catch(ne){P.error=P.error||"Email address's domain name can not be converted to "+(d.iri?"Unicode":"ASCII")+" via punycode: "+ne}S[U]=ie+"@"+X}P.path=S.join(",")}var ee=i.headers=i.headers||{};i.subject&&(ee.subject=i.subject),i.body&&(ee.body=i.body);var ce=[];for(var H in ee)ee[H]!==Ia[H]&&ce.push(H.replace(ht,vr).replace(ht,c).replace(_n,F)+"="+ee[H].replace(ht,vr).replace(ht,c).replace(za,F));return ce.length&&(P.query=ce.join("&")),P}},Ua=/^([^\:]+)\:(.*)/,En={scheme:"urn",parse:function(i,d){var P=i.path&&i.path.match(Ua),S=i;if(P){var U=d.scheme||S.scheme||"urn",q=P[1].toLowerCase(),Z=P[2],te=U+":"+(d.nid||q),ie=V[te];S.nid=q,S.nss=Z,S.path=void 0,ie&&(S=ie.parse(S,d))}else S.error=S.error||"URN can not be parsed.";return S},serialize:function(i,d){var P=d.scheme||i.scheme||"urn",S=i.nid,U=P+":"+(d.nid||S),q=V[U];q&&(i=q.serialize(i,d));var Z=i,te=i.nss;return Z.path=(S||d.nid)+":"+te,Z}},qa=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,bn={scheme:"urn:uuid",parse:function(i,d){var P=i;return P.uuid=P.nss,P.nss=void 0,!d.tolerant&&(!P.uuid||!P.uuid.match(qa))&&(P.error=P.error||"UUID is not valid."),P},serialize:function(i,d){var P=i;return P.nss=(i.uuid||"").toLowerCase(),P}};V[Ye.scheme]=Ye,V[yn.scheme]=yn,V[Rt.scheme]=Rt,V[$n.scheme]=$n,V[wn.scheme]=wn,V[En.scheme]=En,V[bn.scheme]=bn,r.SCHEMES=V,r.pctEncChar=F,r.pctDecChars=W,r.parse=we,r.removeDotSegments=Ie,r.serialize=$e,r.resolveComponents=ft,r.resolve=Ct,r.normalize=Qe,r.equal=Tt,r.escapeComponent=Bt,r.unescapeComponent=be,Object.defineProperty(r,"__esModule",{value:!0})})})(Or,Or.exports);Object.defineProperty(Vr,"__esModule",{value:!0});const wa=Or.exports;wa.code='require("ajv/dist/runtime/uri").default';Vr.default=wa;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CodeGen=e.Name=e.nil=e.stringify=e.str=e._=e.KeywordCxt=void 0;var t=Te;Object.defineProperty(e,"KeywordCxt",{enumerable:!0,get:function(){return t.KeywordCxt}});var r=J;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return r._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return r.str}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return r.stringify}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return r.nil}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return r.Name}}),Object.defineProperty(e,"CodeGen",{enumerable:!0,get:function(){return r.CodeGen}});const a=fr,n=hr,o=at,c=_e,p=J,y=me,m=Gt,f=x,v=To,I=Vr,R=(M,g)=>new RegExp(M,g);R.code="new RegExp";const N=["removeAdditional","useDefaults","coerceTypes"],E=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),$={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},h={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},b=200;function O(M){var g,k,w,s,u,T,V,F,W,Q,oe,Re,ct,St,Pt,we,Nt,lt,ut,dt,Ot,Ie,$e,ft,Ct;const Qe=M.strict,Tt=(g=M.code)===null||g===void 0?void 0:g.optimize,Bt=Tt===!0||Tt===void 0?1:Tt||0,be=(w=(k=M.code)===null||k===void 0?void 0:k.regExp)!==null&&w!==void 0?w:R,Ye=(s=M.uriResolver)!==null&&s!==void 0?s:I.default;return{strictSchema:(T=(u=M.strictSchema)!==null&&u!==void 0?u:Qe)!==null&&T!==void 0?T:!0,strictNumbers:(F=(V=M.strictNumbers)!==null&&V!==void 0?V:Qe)!==null&&F!==void 0?F:!0,strictTypes:(Q=(W=M.strictTypes)!==null&&W!==void 0?W:Qe)!==null&&Q!==void 0?Q:"log",strictTuples:(Re=(oe=M.strictTuples)!==null&&oe!==void 0?oe:Qe)!==null&&Re!==void 0?Re:"log",strictRequired:(St=(ct=M.strictRequired)!==null&&ct!==void 0?ct:Qe)!==null&&St!==void 0?St:!1,code:M.code?Ke(pe({},M.code),{optimize:Bt,regExp:be}):{optimize:Bt,regExp:be},loopRequired:(Pt=M.loopRequired)!==null&&Pt!==void 0?Pt:b,loopEnum:(we=M.loopEnum)!==null&&we!==void 0?we:b,meta:(Nt=M.meta)!==null&&Nt!==void 0?Nt:!0,messages:(lt=M.messages)!==null&&lt!==void 0?lt:!0,inlineRefs:(ut=M.inlineRefs)!==null&&ut!==void 0?ut:!0,schemaId:(dt=M.schemaId)!==null&&dt!==void 0?dt:"$id",addUsedSchema:(Ot=M.addUsedSchema)!==null&&Ot!==void 0?Ot:!0,validateSchema:(Ie=M.validateSchema)!==null&&Ie!==void 0?Ie:!0,validateFormats:($e=M.validateFormats)!==null&&$e!==void 0?$e:!0,unicodeRegExp:(ft=M.unicodeRegExp)!==null&&ft!==void 0?ft:!0,int32range:(Ct=M.int32range)!==null&&Ct!==void 0?Ct:!0,uriResolver:Ye}}class j{constructor(g={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,g=this.opts=pe(pe({},g),O(g));const{es5:k,lines:w}=this.opts.code;this.scope=new p.ValueScope({scope:{},prefixes:E,es5:k,lines:w}),this.logger=Y(g.logger);const s=g.validateFormats;g.validateFormats=!1,this.RULES=(0,o.getRules)(),A.call(this,$,g,"NOT SUPPORTED"),A.call(this,h,g,"DEPRECATED","warn"),this._metaOpts=B.call(this),g.formats&&D.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),g.keywords&&K.call(this,g.keywords),typeof g.meta=="object"&&this.addMetaSchema(g.meta),C.call(this),g.validateFormats=s}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:g,meta:k,schemaId:w}=this.opts;let s=v;w==="id"&&(s=pe({},v),s.id=s.$id,delete s.$id),k&&g&&this.addMetaSchema(s,s[w],!1)}defaultMeta(){const{meta:g,schemaId:k}=this.opts;return this.opts.defaultMeta=typeof g=="object"?g[k]||g:void 0}validate(g,k){let w;if(typeof g=="string"){if(w=this.getSchema(g),!w)throw new Error(`no schema with key or ref "${g}"`)}else w=this.compile(g);const s=w(k);return"$async"in w||(this.errors=w.errors),s}compile(g,k){const w=this._addSchema(g,k);return w.validate||this._compileSchemaEnv(w)}compileAsync(g,k){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");const{loadSchema:w}=this.opts;return s.call(this,g,k);async function s(Q,oe){await u.call(this,Q.$schema);const Re=this._addSchema(Q,oe);return Re.validate||T.call(this,Re)}async function u(Q){Q&&!this.getSchema(Q)&&await s.call(this,{$ref:Q},!0)}async function T(Q){try{return this._compileSchemaEnv(Q)}catch(oe){if(!(oe instanceof n.default))throw oe;return V.call(this,oe),await F.call(this,oe.missingSchema),T.call(this,Q)}}function V({missingSchema:Q,missingRef:oe}){if(this.refs[Q])throw new Error(`AnySchema ${Q} is loaded but ${oe} cannot be resolved`)}async function F(Q){const oe=await W.call(this,Q);this.refs[Q]||await u.call(this,oe.$schema),this.refs[Q]||this.addSchema(oe,Q,k)}async function W(Q){const oe=this._loading[Q];if(oe)return oe;try{return await(this._loading[Q]=w(Q))}finally{delete this._loading[Q]}}}addSchema(g,k,w,s=this.opts.validateSchema){if(Array.isArray(g)){for(const T of g)this.addSchema(T,void 0,w,s);return this}let u;if(typeof g=="object"){const{schemaId:T}=this.opts;if(u=g[T],u!==void 0&&typeof u!="string")throw new Error(`schema ${T} must be string`)}return k=(0,y.normalizeId)(k||u),this._checkUnique(k),this.schemas[k]=this._addSchema(g,w,k,s,!0),this}addMetaSchema(g,k,w=this.opts.validateSchema){return this.addSchema(g,k,!0,w),this}validateSchema(g,k){if(typeof g=="boolean")return!0;let w;if(w=g.$schema,w!==void 0&&typeof w!="string")throw new Error("$schema must be a string");if(w=w||this.opts.defaultMeta||this.defaultMeta(),!w)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const s=this.validate(w,g);if(!s&&k){const u="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(u);else throw new Error(u)}return s}getSchema(g){let k;for(;typeof(k=_.call(this,g))=="string";)g=k;if(k===void 0){const{schemaId:w}=this.opts,s=new c.SchemaEnv({schema:{},schemaId:w});if(k=c.resolveSchema.call(this,s,g),!k)return;this.refs[g]=k}return k.validate||this._compileSchemaEnv(k)}removeSchema(g){if(g instanceof RegExp)return this._removeAllSchemas(this.schemas,g),this._removeAllSchemas(this.refs,g),this;switch(typeof g){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const k=_.call(this,g);return typeof k=="object"&&this._cache.delete(k.schema),delete this.schemas[g],delete this.refs[g],this}case"object":{const k=g;this._cache.delete(k);let w=g[this.opts.schemaId];return w&&(w=(0,y.normalizeId)(w),delete this.schemas[w],delete this.refs[w]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(g){for(const k of g)this.addKeyword(k);return this}addKeyword(g,k){let w;if(typeof g=="string")w=g,typeof k=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),k.keyword=w);else if(typeof g=="object"&&k===void 0){if(k=g,w=k.keyword,Array.isArray(w)&&!w.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(ue.call(this,w,k),!k)return(0,f.eachItem)(w,u=>We.call(this,u)),this;ot.call(this,k);const s=Ke(pe({},k),{type:(0,m.getJSONTypes)(k.type),schemaType:(0,m.getJSONTypes)(k.schemaType)});return(0,f.eachItem)(w,s.type.length===0?u=>We.call(this,u,s):u=>s.type.forEach(T=>We.call(this,u,s,T))),this}getKeyword(g){const k=this.RULES.all[g];return typeof k=="object"?k.definition:!!k}removeKeyword(g){const{RULES:k}=this;delete k.keywords[g],delete k.all[g];for(const w of k.rules){const s=w.rules.findIndex(u=>u.keyword===g);s>=0&&w.rules.splice(s,1)}return this}addFormat(g,k){return typeof k=="string"&&(k=new RegExp(k)),this.formats[g]=k,this}errorsText(g=this.errors,{separator:k=", ",dataVar:w="data"}={}){return!g||g.length===0?"No errors":g.map(s=>`${w}${s.instancePath} ${s.message}`).reduce((s,u)=>s+k+u)}$dataMetaSchema(g,k){const w=this.RULES.all;g=JSON.parse(JSON.stringify(g));for(const s of k){const u=s.split("/").slice(1);let T=g;for(const V of u)T=T[V];for(const V in w){const F=w[V];if(typeof F!="object")continue;const{$data:W}=F.definition,Q=T[V];W&&Q&&(T[V]=it(Q))}}return g}_removeAllSchemas(g,k){for(const w in g){const s=g[w];(!k||k.test(w))&&(typeof s=="string"?delete g[w]:s&&!s.meta&&(this._cache.delete(s.schema),delete g[w]))}}_addSchema(g,k,w,s=this.opts.validateSchema,u=this.opts.addUsedSchema){let T;const{schemaId:V}=this.opts;if(typeof g=="object")T=g[V];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof g!="boolean")throw new Error("schema must be object or boolean")}let F=this._cache.get(g);if(F!==void 0)return F;w=(0,y.normalizeId)(T||w);const W=y.getSchemaRefs.call(this,g,w);return F=new c.SchemaEnv({schema:g,schemaId:V,meta:k,baseId:w,localRefs:W}),this._cache.set(F.schema,F),u&&!w.startsWith("#")&&(w&&this._checkUnique(w),this.refs[w]=F),s&&this.validateSchema(g,!0),F}_checkUnique(g){if(this.schemas[g]||this.refs[g])throw new Error(`schema with key or id "${g}" already exists`)}_compileSchemaEnv(g){if(g.meta?this._compileMetaSchema(g):c.compileSchema.call(this,g),!g.validate)throw new Error("ajv implementation error");return g.validate}_compileMetaSchema(g){const k=this.opts;this.opts=this._metaOpts;try{c.compileSchema.call(this,g)}finally{this.opts=k}}}e.default=j,j.ValidationError=a.default,j.MissingRefError=n.default;function A(M,g,k,w="error"){for(const s in M){const u=s;u in g&&this.logger[w](`${k}: option ${s}. ${M[u]}`)}}function _(M){return M=(0,y.normalizeId)(M),this.schemas[M]||this.refs[M]}function C(){const M=this.opts.schemas;if(!!M)if(Array.isArray(M))this.addSchema(M);else for(const g in M)this.addSchema(M[g],g)}function D(){for(const M in this.opts.formats){const g=this.opts.formats[M];g&&this.addFormat(M,g)}}function K(M){if(Array.isArray(M)){this.addVocabulary(M);return}this.logger.warn("keywords option as map is deprecated, pass array");for(const g in M){const k=M[g];k.keyword||(k.keyword=g),this.addKeyword(k)}}function B(){const M=pe({},this.opts);for(const g of N)delete M[g];return M}const se={log(){},warn(){},error(){}};function Y(M){if(M===!1)return se;if(M===void 0)return console;if(M.log&&M.warn&&M.error)return M;throw new Error("logger must implement log, warn and error methods")}const Ee=/^[a-z_$][a-z0-9_$:-]*$/i;function ue(M,g){const{RULES:k}=this;if((0,f.eachItem)(M,w=>{if(k.keywords[w])throw new Error(`Keyword ${w} is already defined`);if(!Ee.test(w))throw new Error(`Keyword ${w} has invalid name`)}),!!g&&g.$data&&!("code"in g||"validate"in g))throw new Error('$data keyword must have "code" or "validate" function')}function We(M,g,k){var w;const s=g==null?void 0:g.post;if(k&&s)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:u}=this;let T=s?u.post:u.rules.find(({type:F})=>F===k);if(T||(T={type:k,rules:[]},u.rules.push(T)),u.keywords[M]=!0,!g)return;const V={keyword:M,definition:Ke(pe({},g),{type:(0,m.getJSONTypes)(g.type),schemaType:(0,m.getJSONTypes)(g.schemaType)})};g.before?Xe.call(this,T,V,g.before):T.rules.push(V),u.all[M]=V,(w=g.implements)===null||w===void 0||w.forEach(F=>this.addKeyword(F))}function Xe(M,g,k){const w=M.rules.findIndex(s=>s.keyword===k);w>=0?M.rules.splice(w,0,g):(M.rules.push(g),this.logger.warn(`rule ${k} is not defined`))}function ot(M){let{metaSchema:g}=M;g!==void 0&&(M.$data&&this.opts.$data&&(g=it(g)),M.validateSchema=this.compile(g,!0))}const bt={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function it(M){return{anyOf:[M,bt]}}})(Yn);var Fr={},zr={},Ur={};Object.defineProperty(Ur,"__esModule",{value:!0});const Ro={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};Ur.default=Ro;var st={};Object.defineProperty(st,"__esModule",{value:!0});st.callRef=st.getValidate=void 0;const Io=hr,Fn=G,ge=J,yt=Fe,zn=_e,Yt=x,jo={keyword:"$ref",schemaType:"string",code(e){const{gen:t,schema:r,it:a}=e,{baseId:n,schemaEnv:o,validateName:c,opts:p,self:y}=a,{root:m}=o;if((r==="#"||r==="#/")&&n===m.baseId)return v();const f=zn.resolveRef.call(y,m,n,r);if(f===void 0)throw new Io.default(a.opts.uriResolver,n,r);if(f instanceof zn.SchemaEnv)return I(f);return R(f);function v(){if(o===m)return nr(e,c,o,o.$async);const N=t.scopeValue("root",{ref:m});return nr(e,(0,ge._)`${N}.validate`,m,m.$async)}function I(N){const E=Ea(e,N);nr(e,E,N,N.$async)}function R(N){const E=t.scopeValue("schema",p.code.source===!0?{ref:N,code:(0,ge.stringify)(N)}:{ref:N}),$=t.name("valid"),h=e.subschema({schema:N,dataTypes:[],schemaPath:ge.nil,topSchemaRef:E,errSchemaPath:r},$);e.mergeEvaluated(h),e.ok($)}}};function Ea(e,t){const{gen:r}=e;return t.validate?r.scopeValue("validate",{ref:t.validate}):(0,ge._)`${r.scopeValue("wrapper",{ref:t})}.validate`}st.getValidate=Ea;function nr(e,t,r,a){const{gen:n,it:o}=e,{allErrors:c,schemaEnv:p,opts:y}=o,m=y.passContext?yt.default.this:ge.nil;a?f():v();function f(){if(!p.$async)throw new Error("async schema referenced by sync schema");const N=n.let("valid");n.try(()=>{n.code((0,ge._)`await ${(0,Fn.callValidateCode)(e,t,m)}`),R(t),c||n.assign(N,!0)},E=>{n.if((0,ge._)`!(${E} instanceof ${o.ValidationError})`,()=>n.throw(E)),I(E),c||n.assign(N,!1)}),e.ok(N)}function v(){e.result((0,Fn.callValidateCode)(e,t,m),()=>R(t),()=>I(t))}function I(N){const E=(0,ge._)`${N}.errors`;n.assign(yt.default.vErrors,(0,ge._)`${yt.default.vErrors} === null ? ${E} : ${yt.default.vErrors}.concat(${E})`),n.assign(yt.default.errors,(0,ge._)`${yt.default.vErrors}.length`)}function R(N){var E;if(!o.opts.unevaluated)return;const $=(E=r==null?void 0:r.validate)===null||E===void 0?void 0:E.evaluated;if(o.props!==!0)if($&&!$.dynamicProps)$.props!==void 0&&(o.props=Yt.mergeEvaluated.props(n,$.props,o.props));else{const h=n.var("props",(0,ge._)`${N}.evaluated.props`);o.props=Yt.mergeEvaluated.props(n,h,o.props,ge.Name)}if(o.items!==!0)if($&&!$.dynamicItems)$.items!==void 0&&(o.items=Yt.mergeEvaluated.items(n,$.items,o.items));else{const h=n.var("items",(0,ge._)`${N}.evaluated.items`);o.items=Yt.mergeEvaluated.items(n,h,o.items,ge.Name)}}}st.callRef=nr;st.default=jo;Object.defineProperty(zr,"__esModule",{value:!0});const ko=Ur,Do=st,Ao=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",ko.default,Do.default];zr.default=Ao;var qr={},Lr={};Object.defineProperty(Lr,"__esModule",{value:!0});const ir=J,Ge=ir.operators,cr={maximum:{okStr:"<=",ok:Ge.LTE,fail:Ge.GT},minimum:{okStr:">=",ok:Ge.GTE,fail:Ge.LT},exclusiveMaximum:{okStr:"<",ok:Ge.LT,fail:Ge.GTE},exclusiveMinimum:{okStr:">",ok:Ge.GT,fail:Ge.LTE}},Mo={message:({keyword:e,schemaCode:t})=>(0,ir.str)`must be ${cr[e].okStr} ${t}`,params:({keyword:e,schemaCode:t})=>(0,ir._)`{comparison: ${cr[e].okStr}, limit: ${t}}`},Vo={keyword:Object.keys(cr),type:"number",schemaType:"number",$data:!0,error:Mo,code(e){const{keyword:t,data:r,schemaCode:a}=e;e.fail$data((0,ir._)`${r} ${cr[t].fail} ${a} || isNaN(${r})`)}};Lr.default=Vo;var Kr={};Object.defineProperty(Kr,"__esModule",{value:!0});const Vt=J,Fo={message:({schemaCode:e})=>(0,Vt.str)`must be multiple of ${e}`,params:({schemaCode:e})=>(0,Vt._)`{multipleOf: ${e}}`},zo={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:Fo,code(e){const{gen:t,data:r,schemaCode:a,it:n}=e,o=n.opts.multipleOfPrecision,c=t.let("res"),p=o?(0,Vt._)`Math.abs(Math.round(${c}) - ${c}) > 1e-${o}`:(0,Vt._)`${c} !== parseInt(${c})`;e.fail$data((0,Vt._)`(${a} === 0 || (${c} = ${r}/${a}, ${p}))`)}};Kr.default=zo;var Hr={},Gr={};Object.defineProperty(Gr,"__esModule",{value:!0});function ba(e){const t=e.length;let r=0,a=0,n;for(;a<t;)r++,n=e.charCodeAt(a++),n>=55296&&n<=56319&&a<t&&(n=e.charCodeAt(a),(n&64512)===56320&&a++);return r}Gr.default=ba;ba.code='require("ajv/dist/runtime/ucs2length").default';Object.defineProperty(Hr,"__esModule",{value:!0});const rt=J,Uo=x,qo=Gr,Lo={message({keyword:e,schemaCode:t}){const r=e==="maxLength"?"more":"fewer";return(0,rt.str)`must NOT have ${r} than ${t} characters`},params:({schemaCode:e})=>(0,rt._)`{limit: ${e}}`},Ko={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:Lo,code(e){const{keyword:t,data:r,schemaCode:a,it:n}=e,o=t==="maxLength"?rt.operators.GT:rt.operators.LT,c=n.opts.unicode===!1?(0,rt._)`${r}.length`:(0,rt._)`${(0,Uo.useFunc)(e.gen,qo.default)}(${r})`;e.fail$data((0,rt._)`${c} ${o} ${a}`)}};Hr.default=Ko;var Jr={};Object.defineProperty(Jr,"__esModule",{value:!0});const Ho=G,lr=J,Go={message:({schemaCode:e})=>(0,lr.str)`must match pattern "${e}"`,params:({schemaCode:e})=>(0,lr._)`{pattern: ${e}}`},Jo={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:Go,code(e){const{data:t,$data:r,schema:a,schemaCode:n,it:o}=e,c=o.opts.unicodeRegExp?"u":"",p=r?(0,lr._)`(new RegExp(${n}, ${c}))`:(0,Ho.usePattern)(e,a);e.fail$data((0,lr._)`!${p}.test(${t})`)}};Jr.default=Jo;var Br={};Object.defineProperty(Br,"__esModule",{value:!0});const Ft=J,Bo={message({keyword:e,schemaCode:t}){const r=e==="maxProperties"?"more":"fewer";return(0,Ft.str)`must NOT have ${r} than ${t} properties`},params:({schemaCode:e})=>(0,Ft._)`{limit: ${e}}`},Wo={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:Bo,code(e){const{keyword:t,data:r,schemaCode:a}=e,n=t==="maxProperties"?Ft.operators.GT:Ft.operators.LT;e.fail$data((0,Ft._)`Object.keys(${r}).length ${n} ${a}`)}};Br.default=Wo;var Wr={};Object.defineProperty(Wr,"__esModule",{value:!0});const Dt=G,zt=J,Xo=x,Qo={message:({params:{missingProperty:e}})=>(0,zt.str)`must have required property '${e}'`,params:({params:{missingProperty:e}})=>(0,zt._)`{missingProperty: ${e}}`},Yo={keyword:"required",type:"object",schemaType:"array",$data:!0,error:Qo,code(e){const{gen:t,schema:r,schemaCode:a,data:n,$data:o,it:c}=e,{opts:p}=c;if(!o&&r.length===0)return;const y=r.length>=p.loopRequired;if(c.allErrors?m():f(),p.strictRequired){const R=e.parentSchema.properties,{definedProperties:N}=e.it;for(const E of r)if((R==null?void 0:R[E])===void 0&&!N.has(E)){const $=c.schemaEnv.baseId+c.errSchemaPath,h=`required property "${E}" is not defined at "${$}" (strictRequired)`;(0,Xo.checkStrictMode)(c,h,c.opts.strictRequired)}}function m(){if(y||o)e.block$data(zt.nil,v);else for(const R of r)(0,Dt.checkReportMissingProp)(e,R)}function f(){const R=t.let("missing");if(y||o){const N=t.let("valid",!0);e.block$data(N,()=>I(R,N)),e.ok(N)}else t.if((0,Dt.checkMissingProp)(e,r,R)),(0,Dt.reportMissingProp)(e,R),t.else()}function v(){t.forOf("prop",a,R=>{e.setParams({missingProperty:R}),t.if((0,Dt.noPropertyInData)(t,n,R,p.ownProperties),()=>e.error())})}function I(R,N){e.setParams({missingProperty:R}),t.forOf(R,a,()=>{t.assign(N,(0,Dt.propertyInData)(t,n,R,p.ownProperties)),t.if((0,zt.not)(N),()=>{e.error(),t.break()})},zt.nil)}}};Wr.default=Yo;var Xr={};Object.defineProperty(Xr,"__esModule",{value:!0});const Ut=J,Zo={message({keyword:e,schemaCode:t}){const r=e==="maxItems"?"more":"fewer";return(0,Ut.str)`must NOT have ${r} than ${t} items`},params:({schemaCode:e})=>(0,Ut._)`{limit: ${e}}`},xo={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:Zo,code(e){const{keyword:t,data:r,schemaCode:a}=e,n=t==="maxItems"?Ut.operators.GT:Ut.operators.LT;e.fail$data((0,Ut._)`${r}.length ${n} ${a}`)}};Xr.default=xo;var Qr={},Jt={};Object.defineProperty(Jt,"__esModule",{value:!0});const Sa=sa;Sa.code='require("ajv/dist/runtime/equal").default';Jt.default=Sa;Object.defineProperty(Qr,"__esModule",{value:!0});const wr=Gt,fe=J,ei=x,ti=Jt,ri={message:({params:{i:e,j:t}})=>(0,fe.str)`must NOT have duplicate items (items ## ${t} and ${e} are identical)`,params:({params:{i:e,j:t}})=>(0,fe._)`{i: ${e}, j: ${t}}`},ni={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:ri,code(e){const{gen:t,data:r,$data:a,schema:n,parentSchema:o,schemaCode:c,it:p}=e;if(!a&&!n)return;const y=t.let("valid"),m=o.items?(0,wr.getSchemaTypes)(o.items):[];e.block$data(y,f,(0,fe._)`${c} === false`),e.ok(y);function f(){const N=t.let("i",(0,fe._)`${r}.length`),E=t.let("j");e.setParams({i:N,j:E}),t.assign(y,!0),t.if((0,fe._)`${N} > 1`,()=>(v()?I:R)(N,E))}function v(){return m.length>0&&!m.some(N=>N==="object"||N==="array")}function I(N,E){const $=t.name("item"),h=(0,wr.checkDataTypes)(m,$,p.opts.strictNumbers,wr.DataType.Wrong),b=t.const("indices",(0,fe._)`{}`);t.for((0,fe._)`;${N}--;`,()=>{t.let($,(0,fe._)`${r}[${N}]`),t.if(h,(0,fe._)`continue`),m.length>1&&t.if((0,fe._)`typeof ${$} == "string"`,(0,fe._)`${$} += "_"`),t.if((0,fe._)`typeof ${b}[${$}] == "number"`,()=>{t.assign(E,(0,fe._)`${b}[${$}]`),e.error(),t.assign(y,!1).break()}).code((0,fe._)`${b}[${$}] = ${N}`)})}function R(N,E){const $=(0,ei.useFunc)(t,ti.default),h=t.name("outer");t.label(h).for((0,fe._)`;${N}--;`,()=>t.for((0,fe._)`${E} = ${N}; ${E}--;`,()=>t.if((0,fe._)`${$}(${r}[${N}], ${r}[${E}])`,()=>{e.error(),t.assign(y,!1).break(h)})))}}};Qr.default=ni;var Yr={};Object.defineProperty(Yr,"__esModule",{value:!0});const Cr=J,ai=x,si=Jt,oi={message:"must be equal to constant",params:({schemaCode:e})=>(0,Cr._)`{allowedValue: ${e}}`},ii={keyword:"const",$data:!0,error:oi,code(e){const{gen:t,data:r,$data:a,schemaCode:n,schema:o}=e;a||o&&typeof o=="object"?e.fail$data((0,Cr._)`!${(0,ai.useFunc)(t,si.default)}(${r}, ${n})`):e.fail((0,Cr._)`${o} !== ${r}`)}};Yr.default=ii;var Zr={};Object.defineProperty(Zr,"__esModule",{value:!0});const At=J,ci=x,li=Jt,ui={message:"must be equal to one of the allowed values",params:({schemaCode:e})=>(0,At._)`{allowedValues: ${e}}`},di={keyword:"enum",schemaType:"array",$data:!0,error:ui,code(e){const{gen:t,data:r,$data:a,schema:n,schemaCode:o,it:c}=e;if(!a&&n.length===0)throw new Error("enum must have non-empty array");const p=n.length>=c.opts.loopEnum;let y;const m=()=>y!=null?y:y=(0,ci.useFunc)(t,li.default);let f;if(p||a)f=t.let("valid"),e.block$data(f,v);else{if(!Array.isArray(n))throw new Error("ajv implementation error");const R=t.const("vSchema",o);f=(0,At.or)(...n.map((N,E)=>I(R,E)))}e.pass(f);function v(){t.assign(f,!1),t.forOf("v",o,R=>t.if((0,At._)`${m()}(${r}, ${R})`,()=>t.assign(f,!0).break()))}function I(R,N){const E=n[N];return typeof E=="object"&&E!==null?(0,At._)`${m()}(${r}, ${R}[${N}])`:(0,At._)`${r} === ${E}`}}};Zr.default=di;Object.defineProperty(qr,"__esModule",{value:!0});const fi=Lr,hi=Kr,mi=Hr,pi=Jr,yi=Br,vi=Wr,$i=Xr,gi=Qr,_i=Yr,wi=Zr,Ei=[fi.default,hi.default,mi.default,pi.default,yi.default,vi.default,$i.default,gi.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},_i.default,wi.default];qr.default=Ei;var xr={},wt={};Object.defineProperty(wt,"__esModule",{value:!0});wt.validateAdditionalItems=void 0;const nt=J,Tr=x,bi={message:({params:{len:e}})=>(0,nt.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,nt._)`{limit: ${e}}`},Si={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:bi,code(e){const{parentSchema:t,it:r}=e,{items:a}=t;if(!Array.isArray(a)){(0,Tr.checkStrictMode)(r,'"additionalItems" is ignored when "items" is not an array of schemas');return}Pa(e,a)}};function Pa(e,t){const{gen:r,schema:a,data:n,keyword:o,it:c}=e;c.items=!0;const p=r.const("len",(0,nt._)`${n}.length`);if(a===!1)e.setParams({len:t.length}),e.pass((0,nt._)`${p} <= ${t.length}`);else if(typeof a=="object"&&!(0,Tr.alwaysValidSchema)(c,a)){const m=r.var("valid",(0,nt._)`${p} <= ${t.length}`);r.if((0,nt.not)(m),()=>y(m)),e.ok(m)}function y(m){r.forRange("i",t.length,p,f=>{e.subschema({keyword:o,dataProp:f,dataPropType:Tr.Type.Num},m),c.allErrors||r.if((0,nt.not)(m),()=>r.break())})}}wt.validateAdditionalItems=Pa;wt.default=Si;var en={},Et={};Object.defineProperty(Et,"__esModule",{value:!0});Et.validateTuple=void 0;const Un=J,ar=x,Pi=G,Ni={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(e){const{schema:t,it:r}=e;if(Array.isArray(t))return Na(e,"additionalItems",t);r.items=!0,!(0,ar.alwaysValidSchema)(r,t)&&e.ok((0,Pi.validateArray)(e))}};function Na(e,t,r=e.schema){const{gen:a,parentSchema:n,data:o,keyword:c,it:p}=e;f(n),p.opts.unevaluated&&r.length&&p.items!==!0&&(p.items=ar.mergeEvaluated.items(a,r.length,p.items));const y=a.name("valid"),m=a.const("len",(0,Un._)`${o}.length`);r.forEach((v,I)=>{(0,ar.alwaysValidSchema)(p,v)||(a.if((0,Un._)`${m} > ${I}`,()=>e.subschema({keyword:c,schemaProp:I,dataProp:I},y)),e.ok(y))});function f(v){const{opts:I,errSchemaPath:R}=p,N=r.length,E=N===v.minItems&&(N===v.maxItems||v[t]===!1);if(I.strictTuples&&!E){const $=`"${c}" is ${N}-tuple, but minItems or maxItems/${t} are not specified or different at path "${R}"`;(0,ar.checkStrictMode)(p,$,I.strictTuples)}}}Et.validateTuple=Na;Et.default=Ni;Object.defineProperty(en,"__esModule",{value:!0});const Oi=Et,Ci={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:e=>(0,Oi.validateTuple)(e,"items")};en.default=Ci;var tn={};Object.defineProperty(tn,"__esModule",{value:!0});const qn=J,Ti=x,Ri=G,Ii=wt,ji={message:({params:{len:e}})=>(0,qn.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,qn._)`{limit: ${e}}`},ki={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:ji,code(e){const{schema:t,parentSchema:r,it:a}=e,{prefixItems:n}=r;a.items=!0,!(0,Ti.alwaysValidSchema)(a,t)&&(n?(0,Ii.validateAdditionalItems)(e,n):e.ok((0,Ri.validateArray)(e)))}};tn.default=ki;var rn={};Object.defineProperty(rn,"__esModule",{value:!0});const Pe=J,Zt=x,Di={message:({params:{min:e,max:t}})=>t===void 0?(0,Pe.str)`must contain at least ${e} valid item(s)`:(0,Pe.str)`must contain at least ${e} and no more than ${t} valid item(s)`,params:({params:{min:e,max:t}})=>t===void 0?(0,Pe._)`{minContains: ${e}}`:(0,Pe._)`{minContains: ${e}, maxContains: ${t}}`},Ai={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:Di,code(e){const{gen:t,schema:r,parentSchema:a,data:n,it:o}=e;let c,p;const{minContains:y,maxContains:m}=a;o.opts.next?(c=y===void 0?1:y,p=m):c=1;const f=t.const("len",(0,Pe._)`${n}.length`);if(e.setParams({min:c,max:p}),p===void 0&&c===0){(0,Zt.checkStrictMode)(o,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(p!==void 0&&c>p){(0,Zt.checkStrictMode)(o,'"minContains" > "maxContains" is always invalid'),e.fail();return}if((0,Zt.alwaysValidSchema)(o,r)){let E=(0,Pe._)`${f} >= ${c}`;p!==void 0&&(E=(0,Pe._)`${E} && ${f} <= ${p}`),e.pass(E);return}o.items=!0;const v=t.name("valid");p===void 0&&c===1?R(v,()=>t.if(v,()=>t.break())):c===0?(t.let(v,!0),p!==void 0&&t.if((0,Pe._)`${n}.length > 0`,I)):(t.let(v,!1),I()),e.result(v,()=>e.reset());function I(){const E=t.name("_valid"),$=t.let("count",0);R(E,()=>t.if(E,()=>N($)))}function R(E,$){t.forRange("i",0,f,h=>{e.subschema({keyword:"contains",dataProp:h,dataPropType:Zt.Type.Num,compositeRule:!0},E),$()})}function N(E){t.code((0,Pe._)`${E}++`),p===void 0?t.if((0,Pe._)`${E} >= ${c}`,()=>t.assign(v,!0).break()):(t.if((0,Pe._)`${E} > ${p}`,()=>t.assign(v,!1).break()),c===1?t.assign(v,!0):t.if((0,Pe._)`${E} >= ${c}`,()=>t.assign(v,!0)))}}};rn.default=Ai;var Oa={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.validateSchemaDeps=e.validatePropertyDeps=e.error=void 0;const t=J,r=x,a=G;e.error={message:({params:{property:y,depsCount:m,deps:f}})=>{const v=m===1?"property":"properties";return(0,t.str)`must have ${v} ${f} when property ${y} is present`},params:({params:{property:y,depsCount:m,deps:f,missingProperty:v}})=>(0,t._)`{property: ${y},
    missingProperty: ${v},
    depsCount: ${m},
    deps: ${f}}`};const n={keyword:"dependencies",type:"object",schemaType:"object",error:e.error,code(y){const[m,f]=o(y);c(y,m),p(y,f)}};function o({schema:y}){const m={},f={};for(const v in y){if(v==="__proto__")continue;const I=Array.isArray(y[v])?m:f;I[v]=y[v]}return[m,f]}function c(y,m=y.schema){const{gen:f,data:v,it:I}=y;if(Object.keys(m).length===0)return;const R=f.let("missing");for(const N in m){const E=m[N];if(E.length===0)continue;const $=(0,a.propertyInData)(f,v,N,I.opts.ownProperties);y.setParams({property:N,depsCount:E.length,deps:E.join(", ")}),I.allErrors?f.if($,()=>{for(const h of E)(0,a.checkReportMissingProp)(y,h)}):(f.if((0,t._)`${$} && (${(0,a.checkMissingProp)(y,E,R)})`),(0,a.reportMissingProp)(y,R),f.else())}}e.validatePropertyDeps=c;function p(y,m=y.schema){const{gen:f,data:v,keyword:I,it:R}=y,N=f.name("valid");for(const E in m)(0,r.alwaysValidSchema)(R,m[E])||(f.if((0,a.propertyInData)(f,v,E,R.opts.ownProperties),()=>{const $=y.subschema({keyword:I,schemaProp:E},N);y.mergeValidEvaluated($,N)},()=>f.var(N,!0)),y.ok(N))}e.validateSchemaDeps=p,e.default=n})(Oa);var nn={};Object.defineProperty(nn,"__esModule",{value:!0});const Ca=J,Mi=x,Vi={message:"property name must be valid",params:({params:e})=>(0,Ca._)`{propertyName: ${e.propertyName}}`},Fi={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:Vi,code(e){const{gen:t,schema:r,data:a,it:n}=e;if((0,Mi.alwaysValidSchema)(n,r))return;const o=t.name("valid");t.forIn("key",a,c=>{e.setParams({propertyName:c}),e.subschema({keyword:"propertyNames",data:c,dataTypes:["string"],propertyName:c,compositeRule:!0},o),t.if((0,Ca.not)(o),()=>{e.error(!0),n.allErrors||t.break()})}),e.ok(o)}};nn.default=Fi;var yr={};Object.defineProperty(yr,"__esModule",{value:!0});const xt=G,Oe=J,zi=Fe,er=x,Ui={message:"must NOT have additional properties",params:({params:e})=>(0,Oe._)`{additionalProperty: ${e.additionalProperty}}`},qi={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:Ui,code(e){const{gen:t,schema:r,parentSchema:a,data:n,errsCount:o,it:c}=e;if(!o)throw new Error("ajv implementation error");const{allErrors:p,opts:y}=c;if(c.props=!0,y.removeAdditional!=="all"&&(0,er.alwaysValidSchema)(c,r))return;const m=(0,xt.allSchemaProperties)(a.properties),f=(0,xt.allSchemaProperties)(a.patternProperties);v(),e.ok((0,Oe._)`${o} === ${zi.default.errors}`);function v(){t.forIn("key",n,$=>{!m.length&&!f.length?N($):t.if(I($),()=>N($))})}function I($){let h;if(m.length>8){const b=(0,er.schemaRefOrVal)(c,a.properties,"properties");h=(0,xt.isOwnProperty)(t,b,$)}else m.length?h=(0,Oe.or)(...m.map(b=>(0,Oe._)`${$} === ${b}`)):h=Oe.nil;return f.length&&(h=(0,Oe.or)(h,...f.map(b=>(0,Oe._)`${(0,xt.usePattern)(e,b)}.test(${$})`))),(0,Oe.not)(h)}function R($){t.code((0,Oe._)`delete ${n}[${$}]`)}function N($){if(y.removeAdditional==="all"||y.removeAdditional&&r===!1){R($);return}if(r===!1){e.setParams({additionalProperty:$}),e.error(),p||t.break();return}if(typeof r=="object"&&!(0,er.alwaysValidSchema)(c,r)){const h=t.name("valid");y.removeAdditional==="failing"?(E($,h,!1),t.if((0,Oe.not)(h),()=>{e.reset(),R($)})):(E($,h),p||t.if((0,Oe.not)(h),()=>t.break()))}}function E($,h,b){const O={keyword:"additionalProperties",dataProp:$,dataPropType:er.Type.Str};b===!1&&Object.assign(O,{compositeRule:!0,createErrors:!1,allErrors:!1}),e.subschema(O,h)}}};yr.default=qi;var an={};Object.defineProperty(an,"__esModule",{value:!0});const Li=Te,Ln=G,Er=x,Kn=yr,Ki={keyword:"properties",type:"object",schemaType:"object",code(e){const{gen:t,schema:r,parentSchema:a,data:n,it:o}=e;o.opts.removeAdditional==="all"&&a.additionalProperties===void 0&&Kn.default.code(new Li.KeywordCxt(o,Kn.default,"additionalProperties"));const c=(0,Ln.allSchemaProperties)(r);for(const v of c)o.definedProperties.add(v);o.opts.unevaluated&&c.length&&o.props!==!0&&(o.props=Er.mergeEvaluated.props(t,(0,Er.toHash)(c),o.props));const p=c.filter(v=>!(0,Er.alwaysValidSchema)(o,r[v]));if(p.length===0)return;const y=t.name("valid");for(const v of p)m(v)?f(v):(t.if((0,Ln.propertyInData)(t,n,v,o.opts.ownProperties)),f(v),o.allErrors||t.else().var(y,!0),t.endIf()),e.it.definedProperties.add(v),e.ok(y);function m(v){return o.opts.useDefaults&&!o.compositeRule&&r[v].default!==void 0}function f(v){e.subschema({keyword:"properties",schemaProp:v,dataProp:v},y)}}};an.default=Ki;var sn={};Object.defineProperty(sn,"__esModule",{value:!0});const Hn=G,tr=J,Gn=x,Jn=x,Hi={keyword:"patternProperties",type:"object",schemaType:"object",code(e){const{gen:t,schema:r,data:a,parentSchema:n,it:o}=e,{opts:c}=o,p=(0,Hn.allSchemaProperties)(r),y=p.filter(E=>(0,Gn.alwaysValidSchema)(o,r[E]));if(p.length===0||y.length===p.length&&(!o.opts.unevaluated||o.props===!0))return;const m=c.strictSchema&&!c.allowMatchingProperties&&n.properties,f=t.name("valid");o.props!==!0&&!(o.props instanceof tr.Name)&&(o.props=(0,Jn.evaluatedPropsToName)(t,o.props));const{props:v}=o;I();function I(){for(const E of p)m&&R(E),o.allErrors?N(E):(t.var(f,!0),N(E),t.if(f))}function R(E){for(const $ in m)new RegExp(E).test($)&&(0,Gn.checkStrictMode)(o,`property ${$} matches pattern ${E} (use allowMatchingProperties)`)}function N(E){t.forIn("key",a,$=>{t.if((0,tr._)`${(0,Hn.usePattern)(e,E)}.test(${$})`,()=>{const h=y.includes(E);h||e.subschema({keyword:"patternProperties",schemaProp:E,dataProp:$,dataPropType:Jn.Type.Str},f),o.opts.unevaluated&&v!==!0?t.assign((0,tr._)`${v}[${$}]`,!0):!h&&!o.allErrors&&t.if((0,tr.not)(f),()=>t.break())})})}}};sn.default=Hi;var on={};Object.defineProperty(on,"__esModule",{value:!0});const Gi=x,Ji={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(e){const{gen:t,schema:r,it:a}=e;if((0,Gi.alwaysValidSchema)(a,r)){e.fail();return}const n=t.name("valid");e.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},n),e.failResult(n,()=>e.reset(),()=>e.error())},error:{message:"must NOT be valid"}};on.default=Ji;var cn={};Object.defineProperty(cn,"__esModule",{value:!0});const Bi=G,Wi={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:Bi.validateUnion,error:{message:"must match a schema in anyOf"}};cn.default=Wi;var ln={};Object.defineProperty(ln,"__esModule",{value:!0});const sr=J,Xi=x,Qi={message:"must match exactly one schema in oneOf",params:({params:e})=>(0,sr._)`{passingSchemas: ${e.passing}}`},Yi={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:Qi,code(e){const{gen:t,schema:r,parentSchema:a,it:n}=e;if(!Array.isArray(r))throw new Error("ajv implementation error");if(n.opts.discriminator&&a.discriminator)return;const o=r,c=t.let("valid",!1),p=t.let("passing",null),y=t.name("_valid");e.setParams({passing:p}),t.block(m),e.result(c,()=>e.reset(),()=>e.error(!0));function m(){o.forEach((f,v)=>{let I;(0,Xi.alwaysValidSchema)(n,f)?t.var(y,!0):I=e.subschema({keyword:"oneOf",schemaProp:v,compositeRule:!0},y),v>0&&t.if((0,sr._)`${y} && ${c}`).assign(c,!1).assign(p,(0,sr._)`[${p}, ${v}]`).else(),t.if(y,()=>{t.assign(c,!0),t.assign(p,v),I&&e.mergeEvaluated(I,sr.Name)})})}}};ln.default=Yi;var un={};Object.defineProperty(un,"__esModule",{value:!0});const Zi=x,xi={keyword:"allOf",schemaType:"array",code(e){const{gen:t,schema:r,it:a}=e;if(!Array.isArray(r))throw new Error("ajv implementation error");const n=t.name("valid");r.forEach((o,c)=>{if((0,Zi.alwaysValidSchema)(a,o))return;const p=e.subschema({keyword:"allOf",schemaProp:c},n);e.ok(n),e.mergeEvaluated(p)})}};un.default=xi;var dn={};Object.defineProperty(dn,"__esModule",{value:!0});const ur=J,Ta=x,ec={message:({params:e})=>(0,ur.str)`must match "${e.ifClause}" schema`,params:({params:e})=>(0,ur._)`{failingKeyword: ${e.ifClause}}`},tc={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:ec,code(e){const{gen:t,parentSchema:r,it:a}=e;r.then===void 0&&r.else===void 0&&(0,Ta.checkStrictMode)(a,'"if" without "then" and "else" is ignored');const n=Bn(a,"then"),o=Bn(a,"else");if(!n&&!o)return;const c=t.let("valid",!0),p=t.name("_valid");if(y(),e.reset(),n&&o){const f=t.let("ifClause");e.setParams({ifClause:f}),t.if(p,m("then",f),m("else",f))}else n?t.if(p,m("then")):t.if((0,ur.not)(p),m("else"));e.pass(c,()=>e.error(!0));function y(){const f=e.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},p);e.mergeEvaluated(f)}function m(f,v){return()=>{const I=e.subschema({keyword:f},p);t.assign(c,p),e.mergeValidEvaluated(I,c),v?t.assign(v,(0,ur._)`${f}`):e.setParams({ifClause:f})}}}};function Bn(e,t){const r=e.schema[t];return r!==void 0&&!(0,Ta.alwaysValidSchema)(e,r)}dn.default=tc;var fn={};Object.defineProperty(fn,"__esModule",{value:!0});const rc=x,nc={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:e,parentSchema:t,it:r}){t.if===void 0&&(0,rc.checkStrictMode)(r,`"${e}" without "if" is ignored`)}};fn.default=nc;Object.defineProperty(xr,"__esModule",{value:!0});const ac=wt,sc=en,oc=Et,ic=tn,cc=rn,lc=Oa,uc=nn,dc=yr,fc=an,hc=sn,mc=on,pc=cn,yc=ln,vc=un,$c=dn,gc=fn;function _c(e=!1){const t=[mc.default,pc.default,yc.default,vc.default,$c.default,gc.default,uc.default,dc.default,lc.default,fc.default,hc.default];return e?t.push(sc.default,ic.default):t.push(ac.default,oc.default),t.push(cc.default),t}xr.default=_c;var hn={},mn={};Object.defineProperty(mn,"__esModule",{value:!0});const le=J,wc={message:({schemaCode:e})=>(0,le.str)`must match format "${e}"`,params:({schemaCode:e})=>(0,le._)`{format: ${e}}`},Ec={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:wc,code(e,t){const{gen:r,data:a,$data:n,schema:o,schemaCode:c,it:p}=e,{opts:y,errSchemaPath:m,schemaEnv:f,self:v}=p;if(!y.validateFormats)return;n?I():R();function I(){const N=r.scopeValue("formats",{ref:v.formats,code:y.code.formats}),E=r.const("fDef",(0,le._)`${N}[${c}]`),$=r.let("fType"),h=r.let("format");r.if((0,le._)`typeof ${E} == "object" && !(${E} instanceof RegExp)`,()=>r.assign($,(0,le._)`${E}.type || "string"`).assign(h,(0,le._)`${E}.validate`),()=>r.assign($,(0,le._)`"string"`).assign(h,E)),e.fail$data((0,le.or)(b(),O()));function b(){return y.strictSchema===!1?le.nil:(0,le._)`${c} && !${h}`}function O(){const j=f.$async?(0,le._)`(${E}.async ? await ${h}(${a}) : ${h}(${a}))`:(0,le._)`${h}(${a})`,A=(0,le._)`(typeof ${h} == "function" ? ${j} : ${h}.test(${a}))`;return(0,le._)`${h} && ${h} !== true && ${$} === ${t} && !${A}`}}function R(){const N=v.formats[o];if(!N){b();return}if(N===!0)return;const[E,$,h]=O(N);E===t&&e.pass(j());function b(){if(y.strictSchema===!1){v.logger.warn(A());return}throw new Error(A());function A(){return`unknown format "${o}" ignored in schema at path "${m}"`}}function O(A){const _=A instanceof RegExp?(0,le.regexpCode)(A):y.code.formats?(0,le._)`${y.code.formats}${(0,le.getProperty)(o)}`:void 0,C=r.scopeValue("formats",{key:o,ref:A,code:_});return typeof A=="object"&&!(A instanceof RegExp)?[A.type||"string",A.validate,(0,le._)`${C}.validate`]:["string",A,C]}function j(){if(typeof N=="object"&&!(N instanceof RegExp)&&N.async){if(!f.$async)throw new Error("async format in sync schema");return(0,le._)`await ${h}(${a})`}return typeof $=="function"?(0,le._)`${h}(${a})`:(0,le._)`${h}.test(${a})`}}}};mn.default=Ec;Object.defineProperty(hn,"__esModule",{value:!0});const bc=mn,Sc=[bc.default];hn.default=Sc;var _t={};Object.defineProperty(_t,"__esModule",{value:!0});_t.contentVocabulary=_t.metadataVocabulary=void 0;_t.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"];_t.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"];Object.defineProperty(Fr,"__esModule",{value:!0});const Pc=zr,Nc=qr,Oc=xr,Cc=hn,Wn=_t,Tc=[Pc.default,Nc.default,(0,Oc.default)(),Cc.default,Wn.metadataVocabulary,Wn.contentVocabulary];Fr.default=Tc;var pn={},Ra={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.DiscrError=void 0,function(t){t.Tag="tag",t.Mapping="mapping"}(e.DiscrError||(e.DiscrError={}))})(Ra);Object.defineProperty(pn,"__esModule",{value:!0});const vt=J,Rr=Ra,Xn=_e,Rc=x,Ic={message:({params:{discrError:e,tagName:t}})=>e===Rr.DiscrError.Tag?`tag "${t}" must be string`:`value of tag "${t}" must be in oneOf`,params:({params:{discrError:e,tag:t,tagName:r}})=>(0,vt._)`{error: ${e}, tag: ${r}, tagValue: ${t}}`},jc={keyword:"discriminator",type:"object",schemaType:"object",error:Ic,code(e){const{gen:t,data:r,schema:a,parentSchema:n,it:o}=e,{oneOf:c}=n;if(!o.opts.discriminator)throw new Error("discriminator: requires discriminator option");const p=a.propertyName;if(typeof p!="string")throw new Error("discriminator: requires propertyName");if(a.mapping)throw new Error("discriminator: mapping is not supported");if(!c)throw new Error("discriminator: requires oneOf keyword");const y=t.let("valid",!1),m=t.const("tag",(0,vt._)`${r}${(0,vt.getProperty)(p)}`);t.if((0,vt._)`typeof ${m} == "string"`,()=>f(),()=>e.error(!1,{discrError:Rr.DiscrError.Tag,tag:m,tagName:p})),e.ok(y);function f(){const R=I();t.if(!1);for(const N in R)t.elseIf((0,vt._)`${m} === ${N}`),t.assign(y,v(R[N]));t.else(),e.error(!1,{discrError:Rr.DiscrError.Mapping,tag:m,tagName:p}),t.endIf()}function v(R){const N=t.name("valid"),E=e.subschema({keyword:"oneOf",schemaProp:R},N);return e.mergeEvaluated(E,vt.Name),N}function I(){var R;const N={},E=h(n);let $=!0;for(let j=0;j<c.length;j++){let A=c[j];(A==null?void 0:A.$ref)&&!(0,Rc.schemaHasRulesButRef)(A,o.self.RULES)&&(A=Xn.resolveRef.call(o.self,o.schemaEnv.root,o.baseId,A==null?void 0:A.$ref),A instanceof Xn.SchemaEnv&&(A=A.schema));const _=(R=A==null?void 0:A.properties)===null||R===void 0?void 0:R[p];if(typeof _!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${p}"`);$=$&&(E||h(A)),b(_,j)}if(!$)throw new Error(`discriminator: "${p}" must be required`);return N;function h({required:j}){return Array.isArray(j)&&j.includes(p)}function b(j,A){if(j.const)O(j.const,A);else if(j.enum)for(const _ of j.enum)O(_,A);else throw new Error(`discriminator: "properties/${p}" must have "const" or "enum"`)}function O(j,A){if(typeof j!="string"||j in N)throw new Error(`discriminator: "${p}" values must be unique strings`);N[j]=A}}}};pn.default=jc;const kc="http://json-schema.org/draft-07/schema#",Dc="http://json-schema.org/draft-07/schema#",Ac="Core schema meta-schema",Mc={schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},Vc=["object","boolean"],Fc={$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}};var zc={$schema:kc,$id:Dc,title:Ac,definitions:Mc,type:Vc,properties:Fc,default:!0};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=void 0;const r=Yn,a=Fr,n=pn,o=zc,c=["/properties"],p="http://json-schema.org/draft-07/schema";class y extends r.default{_addVocabularies(){super._addVocabularies(),a.default.forEach(I=>this.addVocabulary(I)),this.opts.discriminator&&this.addKeyword(n.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const I=this.opts.$data?this.$dataMetaSchema(o,c):o;this.addMetaSchema(I,p,!1),this.refs["http://json-schema.org/schema"]=p}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(p)?p:void 0)}}e.exports=t=y,Object.defineProperty(t,"__esModule",{value:!0}),t.default=y;var m=Te;Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return m.KeywordCxt}});var f=J;Object.defineProperty(t,"_",{enumerable:!0,get:function(){return f._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return f.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return f.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return f.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return f.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return f.CodeGen}})})(Sr,Sr.exports);var Uc=Ya(Sr.exports);async function qt(e){return fetch(e).then(t=>t.json())}function he(e){const t=document.createElement("pre");t.innerHTML=e,document.getElementById("app").appendChild(t)}function qc(e){return document.createElement("div").appendChild(document.createTextNode(e)).parentNode.innerHTML}function Lt(e,t){let r=qc(JSON.stringify(e,null,2));if(!t){he(r);return}const a=document.createElement("details"),n=document.createElement("summary");n.innerHTML=t,a.appendChild(n);const o=document.createElement("pre");o.innerHTML=r,a.appendChild(o),document.getElementById("app").appendChild(a)}let br={};async function Lc(e){if(!br[e]){const t=`https://raw.githubusercontent.com/ome/ngff/main/${e}/schemas/image.schema`;he("Loading schema... "+t);const r=await qt(t);delete r.$schema,br[e]=r}return br[e]}function Kc(e){return[0,2,4].map(t=>parseInt(e.slice(t,t+2),16))}async function Hc(e,t){return t=t.map(n=>{if(typeof n=="string"){let o=n.split(":").map(c=>parseInt(c));return console.log("startStop",o,n.split(":")),o.length===2?Ba(...o):o[0]}return n}),console.log("region",t),await(await Wa({store:e})).get(t)}function Gc(e){return new Array(e).fill(0).map((t,r)=>r)}function Jc(e,t,r){const a=e[0].shape[0],n=e[0].shape[1],o=new Uint8ClampedArray(4*a*n).fill(0);let c=0;for(let p=0;p<a;p++)for(let y=0;y<n;y++){for(let m=0;m<e.length;m++){let f=e[m].data,v=t[m],I=r[m],N=(f[p][y]-I[0])/(I[1]-I[0]);for(let E=0;E<3;E++)if(v[E]>0){let $=N*v[E]<<0;o[c+E]=Math.max(o[c+E],$)}}o[c+3]=255,c+=4}return o}async function Bc(e,t,r,a){const n=r.length,o=r[n-1],c=r[n-2];if(o>512||c>512)return;let p=t.indexOf("c"),y=r[p]||1;console.log("sizeC",y),console.log("axesNames",t);let m=Xc(t,r);console.log("channelDim",p),console.log("dims",m);let f=Gc(y).map(b=>{let O=[...m];return O[p]=b,O});console.log("slices",f);let v=[],I=[];a&&(v=a.map(b=>[b.window.start,b.window.end]),I=a.map(b=>Kc(b.color)));const R=await Promise.all(f.map(b=>Hc(e,b)));console.log("planes",R);const N=R[0].data,E=R[0].shape[0],$=R[0].shape[1];console.log("data.length",N.length,N.length*4),console.log("channelColors",I),console.log("channelRanges",v);const h=Jc(R,I,v);console.log("rgba",h),Wc(h,$,E)}function Wc(e,t,r){const a=new ImageData(e,t,r);let n=document.createElement("canvas");n.width=t,n.height=r,document.getElementById("app").appendChild(n);var o=n.getContext("2d");o.putImageData(a,0,0)}function Xc(e,t){return e.map((r,a)=>{if(r==="z"){let n=t[a];return parseInt(n/2)}return r==="x"||r==="y"?null:0})}const Qc=new Uc({strict:!1});async function Qn(e,t){var m;const r=e.multiscales[0].version;if(!r){he("No 'multiscales[0].version' found");return}he("OME-NGFF multiscales version: "+r);const a=await Lc(r);console.log(a);const n=Qc.compile(a);he("Validating "+t),n(e)?he("<div style='color: green; font-size:24px; border:solid green 1px; padding: 10px; border-radius: 5px; background: #eeffee'>VALID!</span>"):(he("<div style='color: red; font-size:24px; border:solid red 1px; padding: 10px; border-radius: 5px; background: #ffeeee'>NOT VALID!</span>"),n.errors.forEach(f=>Lt(f)));let c=["t","c","z","y","x"],p=e.multiscales[0].axes;p&&(c=p.map(f=>f.name?f.name:f)),he("Axes: "+JSON.stringify(c));let y=e.multiscales[0].datasets.map(f=>f.path);if(he("Paths: "+JSON.stringify(y)),!!t)for(let f=0;f<y.length;f++){let v=y[f],I=t+v+"/.zarray";he("Loading..."+I);let R=await qt(I);const N=R.shape;he("Shape: "+JSON.stringify(N)),Lt(R,v+"/.zarray"),await Bc(t+v,c,N,(m=e.omero)==null?void 0:m.channels)}}(async function(){let t=new URLSearchParams(window.location.search).get("source");t||alert("Use e.g. ?source=https://uk1s3.embassy.ebi.ac.uk/idr/zarr/v0.3/9836842.zarr to load OME-NGFF"),t.endsWith("/")||(t=t+"/"),he("Loading JSON... "+t+".zattrs");const r=await qt(t+".zattrs");if(Lt(r,".zattrs JSON"),r.multiscales){await Qn(r,t),he("Checking for labels at "+t+"labels/.zattrs");let a;try{a=await qt(t+"labels/.zattrs"),console.log("labelsAttrs",a)}catch{he("No labels found")}if(a&&(Lt(a,"labels/.zattrs"),a.labels)){he("Checking labels: "+JSON.stringify(a.labels));for(let n=0;n<a.labels.length;n++){let o=a.labels[n],c=t+"labels/"+o+"/";he("Loading..."+c+".zattrs");const p=await qt(c+".zattrs");Lt(p,"labels/"+o+"/.zattrs"),await Qn(p,c)}}}else r.plate||he("No multiscales or plate found")})();
